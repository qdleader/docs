<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-rc.0">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <meta name="keywords" content="qdleader,前端面试题大全, 编程学习路线, 编程知识百科, Java, 编程导航, 前端, 开发, 编程分享, 项目, IT, 求职, 面经"><script>var _hmt = _hmt || [];
			(function() {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?c448e2224bfefb1edc964cdd6e7b1175";
			var s = document.getElementsByTagName("script")[0]; 
			s.parentNode.insertBefore(hm, s);
			})()</script><title>你好， qdleader ！</title><meta name="description" content="qdleader,前端面试题大全, 编程学习路线, 编程知识百科, Java, 编程导航, 前端, 开发, 编程分享, 项目, IT, 求职, 面经">
    <link rel="preload" href="/docs/assets/style--4mMmu3V.css" as="style"><link rel="stylesheet" href="/docs/assets/style--4mMmu3V.css">
    <link rel="modulepreload" href="/docs/assets/app-otDwoQZb.js"><link rel="modulepreload" href="/docs/assets/1.乾坤的沙箱隔离机制.html-7J9as8V4.js"><link rel="modulepreload" href="/docs/assets/1.乾坤的沙箱隔离机制.html-J609-9JA.js">
    <link rel="prefetch" href="/docs/assets/index.html-lCpb6ZJb.js" as="script"><link rel="prefetch" href="/docs/assets/DNS解析过程.html-AeXXRD0F.js" as="script"><link rel="prefetch" href="/docs/assets/Next.js 中的 CSR、SSR、SSG、ISR.html-pwtAIomg.js" as="script"><link rel="prefetch" href="/docs/assets/SSL协议的加密方式.html-JpzzcqVp.js" as="script"><link rel="prefetch" href="/docs/assets/http001-get和post区别★★★.html-pfjSoJ4F.js" as="script"><link rel="prefetch" href="/docs/assets/http002-常见http响应状态码.html-M2rMhD6G.js" as="script"><link rel="prefetch" href="/docs/assets/http003-URI和URL的区别.html-Y34DQhAK.js" as="script"><link rel="prefetch" href="/docs/assets/http004-http和https的区别.html-l_5Q7JIJ.js" as="script"><link rel="prefetch" href="/docs/assets/http005-http的工作原理.html-k53T0syl.js" as="script"><link rel="prefetch" href="/docs/assets/http006-HTTPS工作原理.html-aqIQb1je.js" as="script"><link rel="prefetch" href="/docs/assets/http007-TCP和UDP的区别.html-lPXFkRGi.js" as="script"><link rel="prefetch" href="/docs/assets/http008-常见状态码简要版★.html-ixFGoI5p.js" as="script"><link rel="prefetch" href="/docs/assets/http009-http的缓存机制★★★.html-oWsoTZ8M.js" as="script"><link rel="prefetch" href="/docs/assets/http010-http的常见header头★.html-BZEP61OT.js" as="script"><link rel="prefetch" href="/docs/assets/http011-手写原生请求★★.html-eGcS0vX4.js" as="script"><link rel="prefetch" href="/docs/assets/http012-跨域是如何造成的怎么处理★★★.html-aCcG8efG.js" as="script"><link rel="prefetch" href="/docs/assets/http013-https加密的过程.html-gGF-Y_An.js" as="script"><link rel="prefetch" href="/docs/assets/http014-TCP的流量控制.html-EIvAkpja.js" as="script"><link rel="prefetch" href="/docs/assets/restful-api.html-ND6wV_9y.js" as="script"><link rel="prefetch" href="/docs/assets/tcp的三次握手.html-7GumjZep.js" as="script"><link rel="prefetch" href="/docs/assets/package.json中库的版本号详解(_和~区别).html-58n6DTsv.js" as="script"><link rel="prefetch" href="/docs/assets/packagejson常用字段介绍.html-Fc7a7mSu.js" as="script"><link rel="prefetch" href="/docs/assets/切换npm 镜像源.html-idAKyp9Y.js" as="script"><link rel="prefetch" href="/docs/assets/发布内网npm插件.html-BoXIQ8Ax.js" as="script"><link rel="prefetch" href="/docs/assets/如何使用内网npm.html-hEPXCVPE.js" as="script"><link rel="prefetch" href="/docs/assets/搭建内网npm.html-FRH82eUO.js" as="script"><link rel="prefetch" href="/docs/assets/RAF.html-tVJ2AfQj.js" as="script"><link rel="prefetch" href="/docs/assets/前端常遇到的解决跨域问题解决的尝试方案.html-eDnfyvyn.js" as="script"><link rel="prefetch" href="/docs/assets/浏览器指纹.html-KD8bXTHy.js" as="script"><link rel="prefetch" href="/docs/assets/突破本地离线存储5M限制的JS库localforage.html-h_9mUXXL.js" as="script"><link rel="prefetch" href="/docs/assets/N001-前端小技巧.html-A2KJIEgP.js" as="script"><link rel="prefetch" href="/docs/assets/img网络加载异常时候展示的图片.html-Zvby8ug8.js" as="script"><link rel="prefetch" href="/docs/assets/js跳出双重循环.html-kCqH_vW_.js" as="script"><link rel="prefetch" href="/docs/assets/vscode访问md文件.html-2Nb7JBfs.js" as="script"><link rel="prefetch" href="/docs/assets/vs中快速生成console.log.html-ciFIXGAY.js" as="script"><link rel="prefetch" href="/docs/assets/判断一个时间戳是不是当天.html-AkGO3FOr.js" as="script"><link rel="prefetch" href="/docs/assets/判断是手机还是pc.html-VHRt-DUS.js" as="script"><link rel="prefetch" href="/docs/assets/刷新与缓存的关系.html-Xj9iVTK3.js" as="script"><link rel="prefetch" href="/docs/assets/前端必备技能之之debugger利器.html-Ph-LH02w.js" as="script"><link rel="prefetch" href="/docs/assets/前端获取UTC时间戳.html-Kl3cFT1g.js" as="script"><link rel="prefetch" href="/docs/assets/前端访问github加速.html-UFJzRl0i.js" as="script"><link rel="prefetch" href="/docs/assets/前端进行搜索.html-qM_OYYiF.js" as="script"><link rel="prefetch" href="/docs/assets/字符串模板中加入空格.html-erUwlnwT.js" as="script"><link rel="prefetch" href="/docs/assets/将秒数转化为时分秒的时间格式.html-7_JLGsVa.js" as="script"><link rel="prefetch" href="/docs/assets/小tips之js标签label.html-mi7_FmC4.js" as="script"><link rel="prefetch" href="/docs/assets/展开收起详情.html-yF0SKrcR.js" as="script"><link rel="prefetch" href="/docs/assets/微信群.html-GSQwGl6U.js" as="script"><link rel="prefetch" href="/docs/assets/提取富文本中的文字.html-gqNQjwEo.js" as="script"><link rel="prefetch" href="/docs/assets/本地文件用localhost如何访问.html-xuMitt2X.js" as="script"><link rel="prefetch" href="/docs/assets/查询某天是否为工作日.html-GkP1IWfu.js" as="script"><link rel="prefetch" href="/docs/assets/检查当前选项卡是否在后台.html-yHdx3S9h.js" as="script"><link rel="prefetch" href="/docs/assets/禁用浏览器默认记住密码.html-sB9WC9Mh.js" as="script"><link rel="prefetch" href="/docs/assets/获取图片真实尺寸.html--_YyizGZ.js" as="script"><link rel="prefetch" href="/docs/assets/获取当前url的参数.html-CUjW3Vth.js" as="script"><link rel="prefetch" href="/docs/assets/获取随机字符串.html-Su3UrG2I.js" as="script"><link rel="prefetch" href="/docs/assets/计算两个经纬度之间的距离.html-j_hdccBB.js" as="script"><link rel="prefetch" href="/docs/assets/输入中文拼音导致input重复触发事件.html-e_4fXygX.js" as="script"><link rel="prefetch" href="/docs/assets/输入自定义命令快速生成vue模板.html-DLjxSjH1.js" as="script"><link rel="prefetch" href="/docs/assets/项目中svg引入后有问题.html-b3CVkCzo.js" as="script"><link rel="prefetch" href="/docs/assets/ClassName命名.html-cG-J923e.js" as="script"><link rel="prefetch" href="/docs/assets/git-commit规范.html-yLIQGRiq.js" as="script"><link rel="prefetch" href="/docs/assets/git-分支命名规范.html-pVPikrww.js" as="script"><link rel="prefetch" href="/docs/assets/vscode推荐插件安装.html-mDgr9-Uf.js" as="script"><link rel="prefetch" href="/docs/assets/vue规范之组件命名篇.html-90uRRyi6.js" as="script"><link rel="prefetch" href="/docs/assets/汇总篇.html-0LIi-9FH.js" as="script"><link rel="prefetch" href="/docs/assets/Q1用户输入url到页面发生了什么★★★★.html-hHL4zhH7.js" as="script"><link rel="prefetch" href="/docs/assets/J001-aes加密.html-OOw7z2oQ.js" as="script"><link rel="prefetch" href="/docs/assets/J002-des加密.html-GkVXQdSp.js" as="script"><link rel="prefetch" href="/docs/assets/单文件加密.html-Z_f253ZR.js" as="script"><link rel="prefetch" href="/docs/assets/pnpm入门.html-TArBokzd.js" as="script"><link rel="prefetch" href="/docs/assets/数字滚动组件.html-IqL3NWXt.js" as="script"><link rel="prefetch" href="/docs/assets/2.配置代码prettier检验.html-QUcb60f0.js" as="script"><link rel="prefetch" href="/docs/assets/3.配置stylelint.html-qv_V_q3A.js" as="script"><link rel="prefetch" href="/docs/assets/ts文件自动格式化代码.html-eG8lOCNB.js" as="script"><link rel="prefetch" href="/docs/assets/vue3中配置autoimport.html-SgxNnIiW.js" as="script"><link rel="prefetch" href="/docs/assets/快速工程化校验.html-FsW24CtE.js" as="script"><link rel="prefetch" href="/docs/assets/提交git 配置.html-ZrUVSgUh.js" as="script"><link rel="prefetch" href="/docs/assets/js去除字符串空格★.html-Puz343qF.js" as="script"><link rel="prefetch" href="/docs/assets/去除A标签.html-hKQckGbq.js" as="script"><link rel="prefetch" href="/docs/assets/手写trim方法.html-uWp97eGy.js" as="script"><link rel="prefetch" href="/docs/assets/手写个正则将html里的标签全部替换为空★.html-i54jzVei.js" as="script"><link rel="prefetch" href="/docs/assets/手机号验证.html-tV88Xxg9.js" as="script"><link rel="prefetch" href="/docs/assets/数字的各种校验.html-UDDtkP-u.js" as="script"><link rel="prefetch" href="/docs/assets/身份证号正则.html-F4lt3Mbn.js" as="script"><link rel="prefetch" href="/docs/assets/输入时候只能输入数字或小数.html-5vh3CGkr.js" as="script"><link rel="prefetch" href="/docs/assets/S001-判断一个单词是否回文.html-63XIx2x9.js" as="script"><link rel="prefetch" href="/docs/assets/S002-去掉一组整型数组的重复值.html-1ZPyXEyu.js" as="script"><link rel="prefetch" href="/docs/assets/S003-快速排序.html-WPexyoaf.js" as="script"><link rel="prefetch" href="/docs/assets/S004统计一个字符串出现最多的字母.html-Ch3gdXi_.js" as="script"><link rel="prefetch" href="/docs/assets/S005-冒泡排序.html-s9xB0ygi.js" as="script"><link rel="prefetch" href="/docs/assets/S006-不借助临时变量，进行两个整数交换.html-V8hjMYFL.js" as="script"><link rel="prefetch" href="/docs/assets/S007-使用canvas绘制一个有限度的斐波那契数列的曲线.html-a7Cly7dY.js" as="script"><link rel="prefetch" href="/docs/assets/S008找出下列正数组的最大差值.html-I1IJZVjw.js" as="script"><link rel="prefetch" href="/docs/assets/S009-随机生成指定长度的字符串.html-R8AWC9TV.js" as="script"><link rel="prefetch" href="/docs/assets/S010-实现类似getElementsByClassName的功能.html-E31dJ8Dt.js" as="script"><link rel="prefetch" href="/docs/assets/S011.js实现查找树.html-mWKRmu1u.js" as="script"><link rel="prefetch" href="/docs/assets/S012-用正则实现trim.html-abKdQGUw.js" as="script"><link rel="prefetch" href="/docs/assets/S013-字符串原位反转.html-7zUvtOYh.js" as="script"><link rel="prefetch" href="/docs/assets/W001-微信公众号开发之本地免费调试.html-jUHJMT7W.js" as="script"><link rel="prefetch" href="/docs/assets/W002-微信公众号开发之SDK.html-sVpytz0T.js" as="script"><link rel="prefetch" href="/docs/assets/判断用户是否已经授权.html-FHMK4rH8.js" as="script"><link rel="prefetch" href="/docs/assets/去掉小程序的返回按钮.html-EviOjCbz.js" as="script"><link rel="prefetch" href="/docs/assets/定时器清不掉问题.html-tEmmevz8.js" as="script"><link rel="prefetch" href="/docs/assets/小程序中判断请求的连接是否生效.html-u6Lr24my.js" as="script"><link rel="prefetch" href="/docs/assets/小程序中背景音乐getBackgroundAudioManager使用问题.html-fNC8NiTA.js" as="script"><link rel="prefetch" href="/docs/assets/新版的获取用户信息授权.html-GPD7m3aq.js" as="script"><link rel="prefetch" href="/docs/assets/获取地理位置授权.html-KtMexOc9.js" as="script"><link rel="prefetch" href="/docs/assets/获取手机号授权.html-s7KiN7cA.js" as="script"><link rel="prefetch" href="/docs/assets/h5微信外浏览器微信支付跳转白页面的优化.html-3sfhwI2c.js" as="script"><link rel="prefetch" href="/docs/assets/h5微信支付.html-h8B_5Jpk.js" as="script"><link rel="prefetch" href="/docs/assets/h5的支付宝支付.html-gZqOPH7W.js" as="script"><link rel="prefetch" href="/docs/assets/移动端300ms延迟问题.html-FJfE-hr0.js" as="script"><link rel="prefetch" href="/docs/assets/solid原则.html-CILtJBwR.js" as="script"><link rel="prefetch" href="/docs/assets/react 版本 antd多层嵌套表单.html-0R72JG6t.js" as="script"><link rel="prefetch" href="/docs/assets/vue版本element form 表单多层嵌套.html-YATYA19z.js" as="script"><link rel="prefetch" href="/docs/assets/处理数字方法.html-2l158PBf.js" as="script"><link rel="prefetch" href="/docs/assets/小数向上取两位.html-pUxVQhP8.js" as="script"><link rel="prefetch" href="/docs/assets/循环回调.html-u12zKBie.js" as="script"><link rel="prefetch" href="/docs/assets/根据数组的某一属性去重.html-_9UnrxgP.js" as="script"><link rel="prefetch" href="/docs/assets/SYN攻击是什么_.html-LQmJGYnP.js" as="script"><link rel="prefetch" href="/docs/assets/http三次握手的过程.html-GQsqzURW.js" as="script"><link rel="prefetch" href="/docs/assets/http三次握手示意图.html-RzENqTOM.js" as="script"><link rel="prefetch" href="/docs/assets/http四次挥手.html-vQ25EKzw.js" as="script"><link rel="prefetch" href="/docs/assets/http四次挥手示意图.html-csHWeN_R.js" as="script"><link rel="prefetch" href="/docs/assets/三次握手可以传递数据吗.html-7oAAlt4c.js" as="script"><link rel="prefetch" href="/docs/assets/为什么需求三次握手两次不行吗.html-woHrxAdF.js" as="script"><link rel="prefetch" href="/docs/assets/什么是半连接状态.html-Wl8mUCHC.js" as="script"><link rel="prefetch" href="/docs/assets/四次挥手释放连接时，等待2MSL的意义_.html-yyUMQqa-.js" as="script"><link rel="prefetch" href="/docs/assets/挥手为什么需要四次.html-a9vib7R1.js" as="script"><link rel="prefetch" href="/docs/assets/常见问题.html-9MdHrtrp.js" as="script"><link rel="prefetch" href="/docs/assets/Array.of把一串数字转化为数组.html-E6Qgj2z2.js" as="script"><link rel="prefetch" href="/docs/assets/js 优化小技巧.html-r9j0IbKO.js" as="script"><link rel="prefetch" href="/docs/assets/padStart.html-gKHe1g9Z.js" as="script"><link rel="prefetch" href="/docs/assets/常用console.html-lojEVlNR.js" as="script"><link rel="prefetch" href="/docs/assets/ios滑动不顺畅.html-I8vivw1P.js" as="script"><link rel="prefetch" href="/docs/assets/RGB转化为16进制.html-A1onLSAL.js" as="script"><link rel="prefetch" href="/docs/assets/两日期差的天数.html-V_syR_AR.js" as="script"><link rel="prefetch" href="/docs/assets/any、never、unknown、null、undefined、void有什么区别.html-kZfH65ko.js" as="script"><link rel="prefetch" href="/docs/assets/implements和extends的区别.html-UYAhJtp2.js" as="script"><link rel="prefetch" href="/docs/assets/interface和type的区别.html-gbUjRzJu.js" as="script"><link rel="prefetch" href="/docs/assets/枚举和常量枚举的区别.html-JmtV9P6e.js" as="script"><link rel="prefetch" href="/docs/assets/BFC的理解和应用★★★.html-NEgUqpOM.js" as="script"><link rel="prefetch" href="/docs/assets/c003-双飞翼★★★.html-xr0ad5rX.js" as="script"><link rel="prefetch" href="/docs/assets/css实现一个三角形.html-DLXzah4R.js" as="script"><link rel="prefetch" href="/docs/assets/css禁用.html-Lz7jWpVP.js" as="script"><link rel="prefetch" href="/docs/assets/em与rem与vw的区别★★.html-8OEAAHfN.js" as="script"><link rel="prefetch" href="/docs/assets/line-height.html-FZYTqqJP.js" as="script"><link rel="prefetch" href="/docs/assets/margin塌陷.html-GnM0d2Mw.js" as="script"><link rel="prefetch" href="/docs/assets/position有哪些值.html-L8mduxh7.js" as="script"><link rel="prefetch" href="/docs/assets/一行文字居中，多行文字左对齐★.html-to_B9sTB.js" as="script"><link rel="prefetch" href="/docs/assets/不设置宽高写个正方形.html-gEzbheBX.js" as="script"><link rel="prefetch" href="/docs/assets/利用html_css绘制opera浏览器的logo.html-C3lY6sve.js" as="script"><link rel="prefetch" href="/docs/assets/合成层.html-gzUfsl24.js" as="script"><link rel="prefetch" href="/docs/assets/实现一个元素水平垂直居中的方法★★★★.html-nvbWg0Ny.js" as="script"><link rel="prefetch" href="/docs/assets/手写clearfix.html-gBqRpxTT.js" as="script"><link rel="prefetch" href="/docs/assets/盒模型宽度计算★.html-ENW7rKku.js" as="script"><link rel="prefetch" href="/docs/assets/纯数字不换行问题.html-OSHobNtS.js" as="script"><link rel="prefetch" href="/docs/assets/h001-前端语义化理解★★★.html-at-6ha_m.js" as="script"><link rel="prefetch" href="/docs/assets/h002-块级元素和行内元素包含什么★★.html-SKd4Sg8m.js" as="script"><link rel="prefetch" href="/docs/assets/h003-一些好玩的HTML的属性.html-pZz8jK4O.js" as="script"><link rel="prefetch" href="/docs/assets/r001-setState是同步还是异步.html-wgAjtG7J.js" as="script"><link rel="prefetch" href="/docs/assets/r002-setState输出类面试题.html-F9b776UP.js" as="script"><link rel="prefetch" href="/docs/assets/r003-react-diff.html-vWbpSGrN.js" as="script"><link rel="prefetch" href="/docs/assets/r003-react的fiber架构.html-7HirYfBq.js" as="script"><link rel="prefetch" href="/docs/assets/r004-react 是如何区分class和function.html-qRtlslap.js" as="script"><link rel="prefetch" href="/docs/assets/r005-介绍Redux数据流的流程.html-lSbb8kyb.js" as="script"><link rel="prefetch" href="/docs/assets/r007-虚拟dom和真实dom区别.html-UKtKKvgY.js" as="script"><link rel="prefetch" href="/docs/assets/r008-react18 有哪些更新.html-FiTfdvyp.js" as="script"><link rel="prefetch" href="/docs/assets/r009-react组件通信.html-AtqIMtFP.js" as="script"><link rel="prefetch" href="/docs/assets/Teleport是怎么实现选择性挂载的.html-3WyE9HvT.js" as="script"><link rel="prefetch" href="/docs/assets/reactive对象重新赋值后丢失响应而ref不会.html-RfszW-S5.js" as="script"><link rel="prefetch" href="/docs/assets/ref与reactive的区别.html-u0FJYc5g.js" as="script"><link rel="prefetch" href="/docs/assets/vue3 Diff 算法的优化.html-HWg7m7j0.js" as="script"><link rel="prefetch" href="/docs/assets/vue3有哪些新特性.html-li5UuMVR.js" as="script"><link rel="prefetch" href="/docs/assets/vue3的Fragment实现原理.html-s1HIYdTR.js" as="script"><link rel="prefetch" href="/docs/assets/vue3的性能提升在哪几个方面体现.html-RspqpFVh.js" as="script"><link rel="prefetch" href="/docs/assets/V001-vuerouter是怎么传值的.html-jVfhXkCe.js" as="script"><link rel="prefetch" href="/docs/assets/V002-v-if和v-for一起使用的弊端及解决办法.html-P3WIRGDy.js" as="script"><link rel="prefetch" href="/docs/assets/V003-beforeDestory里面一般进行什么操作.html-Y_7LIAk5.js" as="script"><link rel="prefetch" href="/docs/assets/V004-同级组件传值.html-FefZLjyM.js" as="script"><link rel="prefetch" href="/docs/assets/V005-父组件如何获取子组件的属性和方法（偏基础).html-k1QMKfyV.js" as="script"><link rel="prefetch" href="/docs/assets/V006-watch和computed的区别.html-KW6S2cNp.js" as="script"><link rel="prefetch" href="/docs/assets/V007-vue父组件和子组件的生命周期执行顺序.html-jyxq6kkE.js" as="script"><link rel="prefetch" href="/docs/assets/V008-vue的事件修饰符和作用.html-7aOZ4n_t.js" as="script"><link rel="prefetch" href="/docs/assets/V009-vue中父组件监听到子组件的生命周期.html-gaRF0jun.js" as="script"><link rel="prefetch" href="/docs/assets/V010-vue中的keep-alive介绍下吧.html-R602dC88.js" as="script"><link rel="prefetch" href="/docs/assets/V011-vue如何解决页面不重新渲染问题呢.html-SYkgOvIt.js" as="script"><link rel="prefetch" href="/docs/assets/V012-说一哈什么是MVVM.html-r1uinde-.js" as="script"><link rel="prefetch" href="/docs/assets/V013-说一下数据绑定的原理★★★★.html-wjEol2S_.js" as="script"><link rel="prefetch" href="/docs/assets/V014-vue组件通信的几种方式.html-kk51v0-4.js" as="script"><link rel="prefetch" href="/docs/assets/V015-如果子组件改变props里面的数据会发生什么？.html-xtiDyczx.js" as="script"><link rel="prefetch" href="/docs/assets/V016-props怎么自定义验证.html-XqO68WFx.js" as="script"><link rel="prefetch" href="/docs/assets/V017-vue模版的编译原理.html-TwlNT99f.js" as="script"><link rel="prefetch" href="/docs/assets/S015-手写map方法.html-geTTAbSE.js" as="script"><link rel="prefetch" href="/docs/assets/vue项目中使用可选链 ( _. )和双问号 ( __.html-J7twd2OK.js" as="script"><link rel="prefetch" href="/docs/assets/1.子应用路由跳转.html-FREG8QF_.js" as="script"><link rel="prefetch" href="/docs/assets/qiankun的各个生命周期钩子是来做什么的.html-drp3uuv6.js" as="script"><link rel="prefetch" href="/docs/assets/react18主应用集成vue3及react18的qiankun模板.html-ql9RtmMn.js" as="script"><link rel="prefetch" href="/docs/assets/微应用需要支持跨域访问.html-6qND3USl.js" as="script"><link rel="prefetch" href="/docs/assets/Linux 常用命令.html-xakkzBNQ.js" as="script"><link rel="prefetch" href="/docs/assets/Linux 常用命令vim.html-5F4Q37BV.js" as="script"><link rel="prefetch" href="/docs/assets/Docker 安装 mysql.html-_GJpeWVp.js" as="script"><link rel="prefetch" href="/docs/assets/Docker安装ElasticSearch.html-eX4siZhj.js" as="script"><link rel="prefetch" href="/docs/assets/docker 常用的命令.html-ZNhcsbGH.js" as="script"><link rel="prefetch" href="/docs/assets/docker安装minio.html-7Hnttcjy.js" as="script"><link rel="prefetch" href="/docs/assets/docker安装nginx.html-aO935zKF.js" as="script"><link rel="prefetch" href="/docs/assets/mac 上安装docker.html-B758XPYQ.js" as="script"><link rel="prefetch" href="/docs/assets/华为云HECS服务器安装docker.html-tKmyWPER.js" as="script"><link rel="prefetch" href="/docs/assets/阿里云服务器安装docker.html-4NxLaFgj.js" as="script"><link rel="prefetch" href="/docs/assets/Mac OS设置JAVA_HOME环境变量.html-mJtiwRqI.js" as="script"><link rel="prefetch" href="/docs/assets/搭建一个websocket聊天室.html-xIZ3HDu1.js" as="script"><link rel="prefetch" href="/docs/assets/mac上安装mongodb.html-FBzwK_an.js" as="script"><link rel="prefetch" href="/docs/assets/mongo可视化工具.html-SZSCjG3z.js" as="script"><link rel="prefetch" href="/docs/assets/DDL.html-lKIC1LcD.js" as="script"><link rel="prefetch" href="/docs/assets/启用jar包.html-WZW-PbN_.js" as="script"><link rel="prefetch" href="/docs/assets/登录云服务器.html-XVDBkmt5.js" as="script"><link rel="prefetch" href="/docs/assets/端口被占用.html-tKya4bKv.js" as="script"><link rel="prefetch" href="/docs/assets/通过命令上传文件到云服务器.html-JUHgVsEp.js" as="script"><link rel="prefetch" href="/docs/assets/Nginx config 配置.html-aY-bUAYy.js" as="script"><link rel="prefetch" href="/docs/assets/Nginx 汇总篇.html-WSQFb715.js" as="script"><link rel="prefetch" href="/docs/assets/Nginx.html-hctK3E2y.js" as="script"><link rel="prefetch" href="/docs/assets/Nginx常用命令.html-KYxRhKp0.js" as="script"><link rel="prefetch" href="/docs/assets/Nginx缓存相关.html-qYsoJ8Q9.js" as="script"><link rel="prefetch" href="/docs/assets/Nginx配置root、alias、try_files、proxy_pass指令分析.html-A9OsR2uM.js" as="script"><link rel="prefetch" href="/docs/assets/前端项目部署.html-GG7nuHDU.js" as="script"><link rel="prefetch" href="/docs/assets/设置index.html页面不缓存.html-oROH0dhC.js" as="script"><link rel="prefetch" href="/docs/assets/jenkins _ GitHub 实现项目自动化部署.html-pC6V-wXy.js" as="script"><link rel="prefetch" href="/docs/assets/服务器安装jenkins.html-GI27-JLb.js" as="script"><link rel="prefetch" href="/docs/assets/定义常量的好用方法.html-itxdDay2.js" as="script"><link rel="prefetch" href="/docs/assets/常见的一些review问题.html-MgwUejZd.js" as="script"><link rel="prefetch" href="/docs/assets/swiper 鼠标点击分页后不自动开始轮播.html-TSiii2rh.js" as="script"><link rel="prefetch" href="/docs/assets/e001-执行打印001.html-Z5-qRPLz.js" as="script"><link rel="prefetch" href="/docs/assets/e002-promise和setTimeout执行.html-lMRXIvyL.js" as="script"><link rel="prefetch" href="/docs/assets/e003-执行打印003.html-Ec84yiqI.js" as="script"><link rel="prefetch" href="/docs/assets/e004-执行打印004.html-GiWDn67d.js" as="script"><link rel="prefetch" href="/docs/assets/e005-执行打印005.html-sZSZJl5z.js" as="script"><link rel="prefetch" href="/docs/assets/property和attribute区别.html-3jhCg4dE.js" as="script"><link rel="prefetch" href="/docs/assets/window.onload和DOMContentLoaded区别.html-ZAgh2q-0.js" as="script"><link rel="prefetch" href="/docs/assets/事件委托的优缺点.html-BtlW9ShQ.js" as="script"><link rel="prefetch" href="/docs/assets/事件委托类.html-s6U_DFEB.js" as="script"><link rel="prefetch" href="/docs/assets/事件捕获和事件冒泡.html-uiMpJIt-.js" as="script"><link rel="prefetch" href="/docs/assets/持久化链接and管线化★★.html-kO1uuNxZ.js" as="script"><link rel="prefetch" href="/docs/assets/P-001执行打印.html-MyZEGRUX.js" as="script"><link rel="prefetch" href="/docs/assets/async await 的错误捕获.html-eANfAoW2.js" as="script"><link rel="prefetch" href="/docs/assets/promise 的链式调用.html-3WGod1Kz.js" as="script"><link rel="prefetch" href="/docs/assets/promise.all 和promise.allSettled 的区别.html-tmJUiT68.js" as="script"><link rel="prefetch" href="/docs/assets/promise执行打印.html-SouSwWON.js" as="script"><link rel="prefetch" href="/docs/assets/实现一个mergePromise.html-oMMwgtjB.js" as="script"><link rel="prefetch" href="/docs/assets/实现一个异步加载图片的方法.html-FHbDtPci.js" as="script"><link rel="prefetch" href="/docs/assets/T001-this指向.html-kCzWFsPS.js" as="script"><link rel="prefetch" href="/docs/assets/T002-this.html-GRnmU1va.js" as="script"><link rel="prefetch" href="/docs/assets/T003-this打印.html-oXQiZR6t.js" as="script"><link rel="prefetch" href="/docs/assets/T004-this大全上篇.html-1hi2o1X6.js" as="script"><link rel="prefetch" href="/docs/assets/T005-this大全下篇.html-AEKrOLJc.js" as="script"><link rel="prefetch" href="/docs/assets/this的典型应用.html-jat9YwA8.js" as="script"><link rel="prefetch" href="/docs/assets/函数的副作用.html-NwUpnrqc.js" as="script"><link rel="prefetch" href="/docs/assets/F001-for后面加一个（；）.html-8u7PW3IT.js" as="script"><link rel="prefetch" href="/docs/assets/F002-return换行后自动添加分号.html-hIw1wJQk.js" as="script"><link rel="prefetch" href="/docs/assets/y001-基础知识.html-Tl6J93K6.js" as="script"><link rel="prefetch" href="/docs/assets/y002-创建对象的三种方式.html-UeoNhaIs.js" as="script"><link rel="prefetch" href="/docs/assets/y004-执行打印.html-NiCsC2CH.js" as="script"><link rel="prefetch" href="/docs/assets/2-32的随机整数.html-XaRGuunn.js" as="script"><link rel="prefetch" href="/docs/assets/JSON.stringfy和JSON.parse的弊端.html-sfMT0pnj.js" as="script"><link rel="prefetch" href="/docs/assets/Q003-打印输出.html-LcbobgIv.js" as="script"><link rel="prefetch" href="/docs/assets/Q004-instanceOf与typeof的区别★★.html-ExY50VYM.js" as="script"><link rel="prefetch" href="/docs/assets/Q005-document.ready与window.onload.html-uXUBm6il.js" as="script"><link rel="prefetch" href="/docs/assets/Q006-比较instanceof和typeof.html-1srWICPG.js" as="script"><link rel="prefetch" href="/docs/assets/Q007-call和apply及bind区别.html-lxYowKyy.js" as="script"><link rel="prefetch" href="/docs/assets/Q008-输出一个数的7的倍数.html-PFiydlkm.js" as="script"><link rel="prefetch" href="/docs/assets/Q009-判断一个元素是否在可视区中.html-51nS31f3.js" as="script"><link rel="prefetch" href="/docs/assets/Q010 判断js的数据类型.html-V4R2UA_y.js" as="script"><link rel="prefetch" href="/docs/assets/Q011-Object.prototype.toString().call为什么判断类型时候这么准.html-9YIh0qy0.js" as="script"><link rel="prefetch" href="/docs/assets/defer和async的区别.html-hYZ6xKRq.js" as="script"><link rel="prefetch" href="/docs/assets/jquery中如何找到selecte标签中的选中项.html-epx-jcVu.js" as="script"><link rel="prefetch" href="/docs/assets/js动画与css动画差异性★★.html-PsFo-W9R.js" as="script"><link rel="prefetch" href="/docs/assets/js的new操作符做了哪些.html-OYMvWjT9.js" as="script"><link rel="prefetch" href="/docs/assets/require查包的过程.html-uTD9zJ9d.js" as="script"><link rel="prefetch" href="/docs/assets/sort排序原理.html-pB7GIyoc.js" as="script"><link rel="prefetch" href="/docs/assets/this和_(this)在jquery中会有何不同.html-RmnYwGby.js" as="script"><link rel="prefetch" href="/docs/assets/typeof的返回值.html-g2_g-ZdM.js" as="script"><link rel="prefetch" href="/docs/assets/两个 script _第一个报错_第二个是否会继续解析★.html-5RKUYtb5.js" as="script"><link rel="prefetch" href="/docs/assets/何时使用三等何时使用两等.html-o66Q2FyF.js" as="script"><link rel="prefetch" href="/docs/assets/使元素消失的方法.html-XV5cAFv_.js" as="script"><link rel="prefetch" href="/docs/assets/判断两个对象是否相等.html-X7BSWYqz.js" as="script"><link rel="prefetch" href="/docs/assets/如何在b字符串中找到a字符串的位置，a， b字符串长度未知，不能使用字符串方法，不能使用数组方法.html-vfm72_eG.js" as="script"><link rel="prefetch" href="/docs/assets/字符串去空格.html-aSxOkdQU.js" as="script"><link rel="prefetch" href="/docs/assets/定义一个log方法，可以取代console.log.html-9vPH-jtT.js" as="script"><link rel="prefetch" href="/docs/assets/实现函数isInteger.html-7NljyHTU.js" as="script"><link rel="prefetch" href="/docs/assets/将字符串转成特定树形结构.html-eguPhCGU.js" as="script"><link rel="prefetch" href="/docs/assets/手写数组反转.html-bAY0We_G.js" as="script"><link rel="prefetch" href="/docs/assets/打印输出.html-qAxjhE1y.js" as="script"><link rel="prefetch" href="/docs/assets/编写函数获得对象中的值666，必须使用到 str _ 'a.b.c'.html-T1MzKYiI.js" as="script"><link rel="prefetch" href="/docs/assets/获取dom的几种方法★.html-E2FRpkiO.js" as="script"><link rel="prefetch" href="/docs/assets/B001-偶然创建的全局变量.html-US-NFAtR.js" as="script"><link rel="prefetch" href="/docs/assets/B002-变量的提升.html-m11lJZnd.js" as="script"><link rel="prefetch" href="/docs/assets/B003-变量提升2★.html-B-UTJ8dZ.js" as="script"><link rel="prefetch" href="/docs/assets/B004-变量提升★.html-E7wETT5Z.js" as="script"><link rel="prefetch" href="/docs/assets/B005-变量提升.html-9QGmHv_c.js" as="script"><link rel="prefetch" href="/docs/assets/B006-truly和falsely变量.html-lOe_A_kF.js" as="script"><link rel="prefetch" href="/docs/assets/B007-作用域和自由变量的场景题.html-gUKbT-xk.js" as="script"><link rel="prefetch" href="/docs/assets/B008-变量提升★.html-Q35P8FCM.js" as="script"><link rel="prefetch" href="/docs/assets/B009-变量提升.html-NnJnXUun.js" as="script"><link rel="prefetch" href="/docs/assets/B010-(a__ 1 __ a __2 __ a__3)可能为true吗.html-Nfs3u8Tm.js" as="script"><link rel="prefetch" href="/docs/assets/B011-变量输出.html-oNPOp0UW.js" as="script"><link rel="prefetch" href="/docs/assets/B012-变量提升.html-ZUV82QSw.js" as="script"><link rel="prefetch" href="/docs/assets/B013-变量输出类.html-AQ0wfVoE.js" as="script"><link rel="prefetch" href="/docs/assets/B014-变量提升.html-Upe8ZT8i.js" as="script"><link rel="prefetch" href="/docs/assets/B015-检测一个变量是String类型.html-0W1zq8NV.js" as="script"><link rel="prefetch" href="/docs/assets/B016-变量提升类.html-f3tQ2kSx.js" as="script"><link rel="prefetch" href="/docs/assets/!__结果是什么.html-5cFhVM3n.js" as="script"><link rel="prefetch" href="/docs/assets/分组选择符.html-8d9RjOe7.js" as="script"><link rel="prefetch" href="/docs/assets/what is NAN.html-mKCjYpmU.js" as="script"><link rel="prefetch" href="/docs/assets/D001-return分号问题.html-n4dANEmR.js" as="script"><link rel="prefetch" href="/docs/assets/D002-打印输出.html-98EpiueA.js" as="script"><link rel="prefetch" href="/docs/assets/D003-fetch封装最大并发请求★★★.html-X8H-zYMt.js" as="script"><link rel="prefetch" href="/docs/assets/D004-vue的filter中可不可以获取_vm★.html-BmXwjNhf.js" as="script"><link rel="prefetch" href="/docs/assets/D005-vue实现响应式原理即vue如何监听data的每个属性的变化★★★★.html-fWOhIVvM.js" as="script"><link rel="prefetch" href="/docs/assets/D006-作用域和作用域链★★★.html-Q-iVjDFV.js" as="script"><link rel="prefetch" href="/docs/assets/D008-DOM绑定事件的几种方式★★.html-ekBLxML0.js" as="script"><link rel="prefetch" href="/docs/assets/D009-递归类.html---7D67Z_.js" as="script"><link rel="prefetch" href="/docs/assets/D010-_1_2_3_.map(parseInt).html-S9KkJZiV.js" as="script"><link rel="prefetch" href="/docs/assets/D011-map和set的区别.html-1qXhfr71.js" as="script"><link rel="prefetch" href="/docs/assets/D012-垃圾回收机制及内存管理.html-pUX1rGiR.js" as="script"><link rel="prefetch" href="/docs/assets/D013-开发中遇到的内存泄漏如何解决的.html-NsSrfEKT.js" as="script"><link rel="prefetch" href="/docs/assets/forEach究竟能不能改变数组的值★.html-92nG4EeC.js" as="script"><link rel="prefetch" href="/docs/assets/async(eventLoop类问题).html-16rY4LmD.js" as="script"><link rel="prefetch" href="/docs/assets/asyncawait和promise关系.html-slxZ8O4s.js" as="script"><link rel="prefetch" href="/docs/assets/for-of循环.html-dhYvMw6H.js" as="script"><link rel="prefetch" href="/docs/assets/promise.html-9rx8u21L.js" as="script"><link rel="prefetch" href="/docs/assets/宏任务和微任务.html-3cV0uMBE.js" as="script"><link rel="prefetch" href="/docs/assets/实现sleep一秒的几种方式.html-fgZN4ssr.js" as="script"><link rel="prefetch" href="/docs/assets/实现一个promise.retry方法.html-MaulgDV_.js" as="script"><link rel="prefetch" href="/docs/assets/异步打印类async function async1() _.html-XssQmGm1.js" as="script"><link rel="prefetch" href="/docs/assets/循环中的setTimeout按顺序执行.html-AxxGPr0j.js" as="script"><link rel="prefetch" href="/docs/assets/删除树结构中无用的节点.html-E898adcc.js" as="script"><link rel="prefetch" href="/docs/assets/将树结构拍平为一维数组.html-SdBrd0IL.js" as="script"><link rel="prefetch" href="/docs/assets/Arr001-数组的length属性.html-ANkYZB-x.js" as="script"><link rel="prefetch" href="/docs/assets/Arr002-数组的直接赋值.html-VJVuIHOp.js" as="script"><link rel="prefetch" href="/docs/assets/Arr003-数组的最大最小值.html-QvZTSWB2.js" as="script"><link rel="prefetch" href="/docs/assets/Arr004-返回数组中所有真值元素的新数组.html-yLxcsUjI.js" as="script"><link rel="prefetch" href="/docs/assets/Arr005-合并两个数组.html-lXbQLhlD.js" as="script"><link rel="prefetch" href="/docs/assets/Arr006-判断是否是数组的几种方法.html-BAui96o0.js" as="script"><link rel="prefetch" href="/docs/assets/Arr007-删除两个数组的相同元素.html-drmTB4FN.js" as="script"><link rel="prefetch" href="/docs/assets/S001-实现浅拷贝★.html-VG1ijNcu.js" as="script"><link rel="prefetch" href="/docs/assets/S002-数字转化为逗号金钱格式★.html-NLgKZomX.js" as="script"><link rel="prefetch" href="/docs/assets/S003-数组扁平化★.html-Mz_mPJeT.js" as="script"><link rel="prefetch" href="/docs/assets/S004-冒泡排序★.html-_SpsttTy.js" as="script"><link rel="prefetch" href="/docs/assets/S005-手写bind.html-Er-FjBsk.js" as="script"><link rel="prefetch" href="/docs/assets/S006-手写斐波那契数列.html-dBRa-YTn.js" as="script"><link rel="prefetch" href="/docs/assets/S014-手写EventHub（发布订阅）★★★.html-sbrcFVdZ.js" as="script"><link rel="prefetch" href="/docs/assets/S015-手写map方法.html-MEnrTx2x.js" as="script"><link rel="prefetch" href="/docs/assets/S016-手写查找公用数组前缀.html-hGcTXRun.js" as="script"><link rel="prefetch" href="/docs/assets/S017-字符串最长的不重复子串.html-WkarD6tM.js" as="script"><link rel="prefetch" href="/docs/assets/S018-手写数组中第一个没出现的最小正整数.html-TWB5JM-2.js" as="script"><link rel="prefetch" href="/docs/assets/S019-在既定的数据源生成随机数组.html-gyn9sFK3.js" as="script"><link rel="prefetch" href="/docs/assets/S020-手写虚拟Dom转化为真实Dom★★★★.html-S_bs5tyU.js" as="script"><link rel="prefetch" href="/docs/assets/S021-setTimeout实现setInterval.html-R4s85SJE.js" as="script"><link rel="prefetch" href="/docs/assets/S022-手写new.html-X9jyhCPs.js" as="script"><link rel="prefetch" href="/docs/assets/S023手写一个寄生组合继承.html-qBkq34oO.js" as="script"><link rel="prefetch" href="/docs/assets/S024手写快排★.html-moS6SFKp.js" as="script"><link rel="prefetch" href="/docs/assets/S025手写promise.html-fZz90H83.js" as="script"><link rel="prefetch" href="/docs/assets/S026-一维数组转为树结构.html-yFYIXZny.js" as="script"><link rel="prefetch" href="/docs/assets/S027-函数柯理化★★.html-XeJTdyD8.js" as="script"><link rel="prefetch" href="/docs/assets/S028-实现有并行限制的 Promise 调度器.html-iAX3TEYh.js" as="script"><link rel="prefetch" href="/docs/assets/S029-异步控制并发数.html-3jl2ds7l.js" as="script"><link rel="prefetch" href="/docs/assets/S030-获取url参数的方法.html-rRn-cxGM.js" as="script"><link rel="prefetch" href="/docs/assets/S031-手写instanceof.html-gvtMQwO6.js" as="script"><link rel="prefetch" href="/docs/assets/S032-手写Promise加载图片.html-m5lVwRkK.js" as="script"><link rel="prefetch" href="/docs/assets/S033-创建10个标签，点击的时候弹出来对应的序号.html-IvTjQilI.js" as="script"><link rel="prefetch" href="/docs/assets/S034-函数实现一秒输出一个数.html-c0FZpKe3.js" as="script"><link rel="prefetch" href="/docs/assets/S035-手写一个带并发限制的异步调度器Schduler.html-eFUwz26S.js" as="script"><link rel="prefetch" href="/docs/assets/S036-手写const.html-hjz9rcBx.js" as="script"><link rel="prefetch" href="/docs/assets/S037-实现一个LRU缓存函数.html-wL8-r_Gf.js" as="script"><link rel="prefetch" href="/docs/assets/S038-手写async，await的实现.html-Q-TrRVKT.js" as="script"><link rel="prefetch" href="/docs/assets/S039-单调递增子序列★★★.html-kzSDxCs4.js" as="script"><link rel="prefetch" href="/docs/assets/S040-手写compose和pipe函数.html-w5rcyaPP.js" as="script"><link rel="prefetch" href="/docs/assets/S041-手写call和apply.html-mnfbMK_n.js" as="script"><link rel="prefetch" href="/docs/assets/S042-实现一个LazyMan.html-lRkJvdDG.js" as="script"><link rel="prefetch" href="/docs/assets/S043-Object.is.html-qrdUtoJa.js" as="script"><link rel="prefetch" href="/docs/assets/S044-手写原生的ajax请求.html-AnWy-Yvn.js" as="script"><link rel="prefetch" href="/docs/assets/S045-手写JSON.parse.html-aPC3lOsy.js" as="script"><link rel="prefetch" href="/docs/assets/S046-手写Promise.allSettled.html-GtVSCtf_.js" as="script"><link rel="prefetch" href="/docs/assets/S047-多tab通信.html-7usE-zIy.js" as="script"><link rel="prefetch" href="/docs/assets/s007-手写一个数据双向绑定.html-GfKJePAr.js" as="script"><link rel="prefetch" href="/docs/assets/s008-手写函数节流★★.html-CDLmkU2I.js" as="script"><link rel="prefetch" href="/docs/assets/s009-手写函数防抖★★.html-NFB-Qgn1.js" as="script"><link rel="prefetch" href="/docs/assets/s010-手写深度比较.html-OrJEONc8.js" as="script"><link rel="prefetch" href="/docs/assets/s011-手写深拷贝★★.html-d65Jc_mA.js" as="script"><link rel="prefetch" href="/docs/assets/s012-手写promiseAll.html-bPjkcQuX.js" as="script"><link rel="prefetch" href="/docs/assets/s013-书写promiseRace.html-QbdWcGdd.js" as="script"><link rel="prefetch" href="/docs/assets/树形结构转数组.html--aP51eo2.js" as="script"><link rel="prefetch" href="/docs/assets/Y001-浮点运算.html-PPOgFOPW.js" as="script"><link rel="prefetch" href="/docs/assets/Y002-console运算结果.html-BfqJqXxp.js" as="script"><link rel="prefetch" href="/docs/assets/Y003-强制和隐式类型转换.html-BBIMHtSJ.js" as="script"><link rel="prefetch" href="/docs/assets/Y004-隐式转换2.html-NhsKirgc.js" as="script"><link rel="prefetch" href="/docs/assets/Y005-两大数相加★.html-avV4e5k4.js" as="script"><link rel="prefetch" href="/docs/assets/Y006-字符串转为数字.html-tUmROHe_.js" as="script"><link rel="prefetch" href="/docs/assets/Y007-精度丢失问题.html-LYMojPrS.js" as="script"><link rel="prefetch" href="/docs/assets/Y008-实现函数isInteger.html-zR2WZIKD.js" as="script"><link rel="prefetch" href="/docs/assets/Y009-_1_2_3_.map(parseInt).html-qXz1ZD5v.js" as="script"><link rel="prefetch" href="/docs/assets/Y010-四舍五入保留两位有效数字.html-X0zaUZdc.js" as="script"><link rel="prefetch" href="/docs/assets/toPrecision.html-G5F-VLUn.js" as="script"><link rel="prefetch" href="/docs/assets/hash 与 history 的区别.html--QV0h0op.js" as="script"><link rel="prefetch" href="/docs/assets/B-001.html-uywGix6r.js" as="script"><link rel="prefetch" href="/docs/assets/B-002经典闭包.html-6KaPJoJx.js" as="script"><link rel="prefetch" href="/docs/assets/B-003.html-VWXtDNq8.js" as="script"><link rel="prefetch" href="/docs/assets/B-004.html-mb7XgmXc.js" as="script"><link rel="prefetch" href="/docs/assets/B-005.html-4S2tujQl.js" as="script"><link rel="prefetch" href="/docs/assets/B-006let a _ 0_ b _ 0 function fn(a) _   fn _ function fn2(b) _     console.log(__a_b)_   _   console.log(a__)_ _ .html-t3cOjeVt.js" as="script"><link rel="prefetch" href="/docs/assets/B-006let a _ 0_ b _ 0 function fn(a) _   fn _ function fn2(b) _     console.log(__a_b)_   _   console.log(a__)_ _ fn(1)   fn(2) .html-xkW6_k4K.js" as="script"><link rel="prefetch" href="/docs/assets/B-008.html-j9mhiAIK.js" as="script"><link rel="prefetch" href="/docs/assets/B007.html-cGNfn-L3.js" as="script"><link rel="prefetch" href="/docs/assets/什么是闭包.html-HAcdlHpf.js" as="script"><link rel="prefetch" href="/docs/assets/001-什么是react的合成事件.html-AQtcxtC7.js" as="script"><link rel="prefetch" href="/docs/assets/002-函数组件与类组件的区别 copy.html-jAVDtL6l.js" as="script"><link rel="prefetch" href="/docs/assets/003-什么是受控组件和非受控组件.html-_LbGcBP0.js" as="script"><link rel="prefetch" href="/docs/assets/tomcat常用命令.html-10LCH8Sj.js" as="script"><link rel="prefetch" href="/docs/assets/2.微应用加载流程分析.html-iUScs-2S.js" as="script"><link rel="prefetch" href="/docs/assets/Proxy是如何监听数组的.html-fZzMd16j.js" as="script"><link rel="prefetch" href="/docs/assets/Proxy的原理.html-Yns3W2g0.js" as="script"><link rel="prefetch" href="/docs/assets/Reflect和Proxy.html-U9kVrENJ.js" as="script"><link rel="prefetch" href="/docs/assets/proxy的基本使用.html-fwZ8zDJz.js" as="script"><link rel="prefetch" href="/docs/assets/如何实现无缝轮播.html-BnZZfRlF.js" as="script"><link rel="prefetch" href="/docs/assets/S00-输出内容.html-E_2QMGfO.js" as="script"><link rel="prefetch" href="/docs/assets/压缩字符串.html-igoiBaYN.js" as="script"><link rel="prefetch" href="/docs/assets/字符串中最长连续数字.html-Q5nos4MH.js" as="script"><link rel="prefetch" href="/docs/assets/字符串转驼峰处理.html-YBEQW9l-.js" as="script"><link rel="prefetch" href="/docs/assets/洗牌算法.html-ZJLoUx2f.js" as="script"><link rel="prefetch" href="/docs/assets/cold-001版本号排序的方法.html-Gk57gsv4.js" as="script"><link rel="prefetch" href="/docs/assets/cold-002实现JSON.parse.html-u2qbjD37.js" as="script"><link rel="prefetch" href="/docs/assets/cold-003判断一个对象有环引用.html-7lOXbK_V.js" as="script"><link rel="prefetch" href="/docs/assets/cold-004判断一个对象的层数.html-TbP2ujhS.js" as="script"><link rel="prefetch" href="/docs/assets/cold-005实现lazyMan函数.html-S8qlAs6o.js" as="script"><link rel="prefetch" href="/docs/assets/字符串中大小字母转换.html-qemm4sNs.js" as="script"><link rel="prefetch" href="/docs/assets/404.html-r6aI8Oiv.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-I78TJsF7.js" as="script"><link rel="prefetch" href="/docs/assets/DNS解析过程.html-T7NBv3lf.js" as="script"><link rel="prefetch" href="/docs/assets/Next.js 中的 CSR、SSR、SSG、ISR.html-X51ZtZos.js" as="script"><link rel="prefetch" href="/docs/assets/SSL协议的加密方式.html-xPMIciYJ.js" as="script"><link rel="prefetch" href="/docs/assets/http001-get和post区别★★★.html-dzu_2uKt.js" as="script"><link rel="prefetch" href="/docs/assets/http002-常见http响应状态码.html-MrrxDRxV.js" as="script"><link rel="prefetch" href="/docs/assets/http003-URI和URL的区别.html-3_rgm9n4.js" as="script"><link rel="prefetch" href="/docs/assets/http004-http和https的区别.html-SgbVhbkH.js" as="script"><link rel="prefetch" href="/docs/assets/http005-http的工作原理.html-RozeDvkS.js" as="script"><link rel="prefetch" href="/docs/assets/http006-HTTPS工作原理.html-eP2mqQpp.js" as="script"><link rel="prefetch" href="/docs/assets/http007-TCP和UDP的区别.html-wF_GqLXk.js" as="script"><link rel="prefetch" href="/docs/assets/http008-常见状态码简要版★.html-0DQD2Qzn.js" as="script"><link rel="prefetch" href="/docs/assets/http009-http的缓存机制★★★.html-G3lChuDT.js" as="script"><link rel="prefetch" href="/docs/assets/http010-http的常见header头★.html-_SFyRkHE.js" as="script"><link rel="prefetch" href="/docs/assets/http011-手写原生请求★★.html-rYJSniW9.js" as="script"><link rel="prefetch" href="/docs/assets/http012-跨域是如何造成的怎么处理★★★.html-5YeXHlbK.js" as="script"><link rel="prefetch" href="/docs/assets/http013-https加密的过程.html--Q1X3Xh6.js" as="script"><link rel="prefetch" href="/docs/assets/http014-TCP的流量控制.html-sLeL0kSM.js" as="script"><link rel="prefetch" href="/docs/assets/restful-api.html-e84XrcfG.js" as="script"><link rel="prefetch" href="/docs/assets/tcp的三次握手.html-LSFbEMqG.js" as="script"><link rel="prefetch" href="/docs/assets/package.json中库的版本号详解(_和~区别).html-4R--EKRr.js" as="script"><link rel="prefetch" href="/docs/assets/packagejson常用字段介绍.html-yXEkDyAD.js" as="script"><link rel="prefetch" href="/docs/assets/切换npm 镜像源.html-iLZxEFKp.js" as="script"><link rel="prefetch" href="/docs/assets/发布内网npm插件.html-TWEjGuWG.js" as="script"><link rel="prefetch" href="/docs/assets/如何使用内网npm.html-bHB2yOSc.js" as="script"><link rel="prefetch" href="/docs/assets/搭建内网npm.html-cS6RtFcm.js" as="script"><link rel="prefetch" href="/docs/assets/RAF.html-9Y5oHMjk.js" as="script"><link rel="prefetch" href="/docs/assets/前端常遇到的解决跨域问题解决的尝试方案.html-B7ff4R0q.js" as="script"><link rel="prefetch" href="/docs/assets/浏览器指纹.html-M5R1-bxe.js" as="script"><link rel="prefetch" href="/docs/assets/突破本地离线存储5M限制的JS库localforage.html-_3sflZSN.js" as="script"><link rel="prefetch" href="/docs/assets/N001-前端小技巧.html-2s2Y5-3A.js" as="script"><link rel="prefetch" href="/docs/assets/img网络加载异常时候展示的图片.html-YPSXErN3.js" as="script"><link rel="prefetch" href="/docs/assets/js跳出双重循环.html-cykYTeCg.js" as="script"><link rel="prefetch" href="/docs/assets/vscode访问md文件.html-CcvS2nr4.js" as="script"><link rel="prefetch" href="/docs/assets/vs中快速生成console.log.html-bsyM0K2i.js" as="script"><link rel="prefetch" href="/docs/assets/判断一个时间戳是不是当天.html-H1u5Djwb.js" as="script"><link rel="prefetch" href="/docs/assets/判断是手机还是pc.html-d1TPcKMG.js" as="script"><link rel="prefetch" href="/docs/assets/刷新与缓存的关系.html-LBBe08B3.js" as="script"><link rel="prefetch" href="/docs/assets/前端必备技能之之debugger利器.html-roz8wPgY.js" as="script"><link rel="prefetch" href="/docs/assets/前端获取UTC时间戳.html--3_gOvmQ.js" as="script"><link rel="prefetch" href="/docs/assets/前端访问github加速.html-ZHiIiU8j.js" as="script"><link rel="prefetch" href="/docs/assets/前端进行搜索.html-ZTss-cXt.js" as="script"><link rel="prefetch" href="/docs/assets/字符串模板中加入空格.html-9koAOgXr.js" as="script"><link rel="prefetch" href="/docs/assets/将秒数转化为时分秒的时间格式.html-7NMh364Y.js" as="script"><link rel="prefetch" href="/docs/assets/小tips之js标签label.html-3DGEtQbq.js" as="script"><link rel="prefetch" href="/docs/assets/展开收起详情.html-c6saGjVb.js" as="script"><link rel="prefetch" href="/docs/assets/微信群.html-4eIKR-pp.js" as="script"><link rel="prefetch" href="/docs/assets/提取富文本中的文字.html-QNzGslGE.js" as="script"><link rel="prefetch" href="/docs/assets/本地文件用localhost如何访问.html-1cyc0PMx.js" as="script"><link rel="prefetch" href="/docs/assets/查询某天是否为工作日.html-izgns_2G.js" as="script"><link rel="prefetch" href="/docs/assets/检查当前选项卡是否在后台.html-eHE56IIc.js" as="script"><link rel="prefetch" href="/docs/assets/禁用浏览器默认记住密码.html-yU7ySNI-.js" as="script"><link rel="prefetch" href="/docs/assets/获取图片真实尺寸.html-lcHmz_5I.js" as="script"><link rel="prefetch" href="/docs/assets/获取当前url的参数.html-YmZymKw3.js" as="script"><link rel="prefetch" href="/docs/assets/获取随机字符串.html-XZMXzbm1.js" as="script"><link rel="prefetch" href="/docs/assets/计算两个经纬度之间的距离.html-tQJT0QCd.js" as="script"><link rel="prefetch" href="/docs/assets/输入中文拼音导致input重复触发事件.html-gJv3CmaR.js" as="script"><link rel="prefetch" href="/docs/assets/输入自定义命令快速生成vue模板.html-UxQWNyzG.js" as="script"><link rel="prefetch" href="/docs/assets/项目中svg引入后有问题.html-CcmJLSJD.js" as="script"><link rel="prefetch" href="/docs/assets/ClassName命名.html-75UuoAUW.js" as="script"><link rel="prefetch" href="/docs/assets/git-commit规范.html-SQIb9U3B.js" as="script"><link rel="prefetch" href="/docs/assets/git-分支命名规范.html-VkgqLgyA.js" as="script"><link rel="prefetch" href="/docs/assets/vscode推荐插件安装.html-4kOqxDD3.js" as="script"><link rel="prefetch" href="/docs/assets/vue规范之组件命名篇.html-kTlLJ5m4.js" as="script"><link rel="prefetch" href="/docs/assets/汇总篇.html-mscqGdil.js" as="script"><link rel="prefetch" href="/docs/assets/Q1用户输入url到页面发生了什么★★★★.html-bjSQGo5X.js" as="script"><link rel="prefetch" href="/docs/assets/J001-aes加密.html-3JJVWZeu.js" as="script"><link rel="prefetch" href="/docs/assets/J002-des加密.html-eFksc4VZ.js" as="script"><link rel="prefetch" href="/docs/assets/单文件加密.html-DV1RB_JG.js" as="script"><link rel="prefetch" href="/docs/assets/pnpm入门.html-aoyQp0fg.js" as="script"><link rel="prefetch" href="/docs/assets/数字滚动组件.html-w2HJyrdC.js" as="script"><link rel="prefetch" href="/docs/assets/2.配置代码prettier检验.html-17eAWuVX.js" as="script"><link rel="prefetch" href="/docs/assets/3.配置stylelint.html-Gv6Qe0Dh.js" as="script"><link rel="prefetch" href="/docs/assets/ts文件自动格式化代码.html-hRjyKArR.js" as="script"><link rel="prefetch" href="/docs/assets/vue3中配置autoimport.html-hSf2Ah-J.js" as="script"><link rel="prefetch" href="/docs/assets/快速工程化校验.html-XboqGOqa.js" as="script"><link rel="prefetch" href="/docs/assets/提交git 配置.html-v5hQd5fk.js" as="script"><link rel="prefetch" href="/docs/assets/js去除字符串空格★.html-t0r2OynR.js" as="script"><link rel="prefetch" href="/docs/assets/去除A标签.html-UMUHP_aG.js" as="script"><link rel="prefetch" href="/docs/assets/手写trim方法.html-RzLKUc43.js" as="script"><link rel="prefetch" href="/docs/assets/手写个正则将html里的标签全部替换为空★.html-1NBrz1vH.js" as="script"><link rel="prefetch" href="/docs/assets/手机号验证.html-g6Chg0bL.js" as="script"><link rel="prefetch" href="/docs/assets/数字的各种校验.html-zNfpUyQy.js" as="script"><link rel="prefetch" href="/docs/assets/身份证号正则.html-ohldGsxY.js" as="script"><link rel="prefetch" href="/docs/assets/输入时候只能输入数字或小数.html-27WXUh2q.js" as="script"><link rel="prefetch" href="/docs/assets/S001-判断一个单词是否回文.html-1TgB1Sb_.js" as="script"><link rel="prefetch" href="/docs/assets/S002-去掉一组整型数组的重复值.html-HSgpyW6x.js" as="script"><link rel="prefetch" href="/docs/assets/S003-快速排序.html-mpC9Wi09.js" as="script"><link rel="prefetch" href="/docs/assets/S004统计一个字符串出现最多的字母.html-zr6dIZZN.js" as="script"><link rel="prefetch" href="/docs/assets/S005-冒泡排序.html-du4_bgIK.js" as="script"><link rel="prefetch" href="/docs/assets/S006-不借助临时变量，进行两个整数交换.html-Dj4KXhUU.js" as="script"><link rel="prefetch" href="/docs/assets/S007-使用canvas绘制一个有限度的斐波那契数列的曲线.html-Ysu-eFYs.js" as="script"><link rel="prefetch" href="/docs/assets/S008找出下列正数组的最大差值.html-gkzseXpF.js" as="script"><link rel="prefetch" href="/docs/assets/S009-随机生成指定长度的字符串.html-29oIrSyf.js" as="script"><link rel="prefetch" href="/docs/assets/S010-实现类似getElementsByClassName的功能.html-btSfv_oB.js" as="script"><link rel="prefetch" href="/docs/assets/S011.js实现查找树.html-T8ras_Zp.js" as="script"><link rel="prefetch" href="/docs/assets/S012-用正则实现trim.html-vr5PQqz5.js" as="script"><link rel="prefetch" href="/docs/assets/S013-字符串原位反转.html-udvWJUCE.js" as="script"><link rel="prefetch" href="/docs/assets/W001-微信公众号开发之本地免费调试.html-S3rx77dk.js" as="script"><link rel="prefetch" href="/docs/assets/W002-微信公众号开发之SDK.html-QIQUOOL6.js" as="script"><link rel="prefetch" href="/docs/assets/判断用户是否已经授权.html-ASIAz8YB.js" as="script"><link rel="prefetch" href="/docs/assets/去掉小程序的返回按钮.html-MlFZUiSC.js" as="script"><link rel="prefetch" href="/docs/assets/定时器清不掉问题.html-hpdGArpl.js" as="script"><link rel="prefetch" href="/docs/assets/小程序中判断请求的连接是否生效.html-IRqChDI5.js" as="script"><link rel="prefetch" href="/docs/assets/小程序中背景音乐getBackgroundAudioManager使用问题.html-sY0quMS2.js" as="script"><link rel="prefetch" href="/docs/assets/新版的获取用户信息授权.html--5iDIWzQ.js" as="script"><link rel="prefetch" href="/docs/assets/获取地理位置授权.html-bRBC1lG9.js" as="script"><link rel="prefetch" href="/docs/assets/获取手机号授权.html-ajf1QUpn.js" as="script"><link rel="prefetch" href="/docs/assets/h5微信外浏览器微信支付跳转白页面的优化.html-PEj5MzpB.js" as="script"><link rel="prefetch" href="/docs/assets/h5微信支付.html-v3CDyKRT.js" as="script"><link rel="prefetch" href="/docs/assets/h5的支付宝支付.html-HaPyAZyj.js" as="script"><link rel="prefetch" href="/docs/assets/移动端300ms延迟问题.html-pQZASMcG.js" as="script"><link rel="prefetch" href="/docs/assets/solid原则.html-20xACnOr.js" as="script"><link rel="prefetch" href="/docs/assets/react 版本 antd多层嵌套表单.html-qR8R9Fmj.js" as="script"><link rel="prefetch" href="/docs/assets/vue版本element form 表单多层嵌套.html-4o4z6FkL.js" as="script"><link rel="prefetch" href="/docs/assets/处理数字方法.html-quKIvRzR.js" as="script"><link rel="prefetch" href="/docs/assets/小数向上取两位.html--X8t9ywu.js" as="script"><link rel="prefetch" href="/docs/assets/循环回调.html-rGLqBMX0.js" as="script"><link rel="prefetch" href="/docs/assets/根据数组的某一属性去重.html-BHCSM773.js" as="script"><link rel="prefetch" href="/docs/assets/SYN攻击是什么_.html-usnxobRX.js" as="script"><link rel="prefetch" href="/docs/assets/http三次握手的过程.html-8wx2CgFT.js" as="script"><link rel="prefetch" href="/docs/assets/http三次握手示意图.html-5Myw8Xbm.js" as="script"><link rel="prefetch" href="/docs/assets/http四次挥手.html-08swlWFD.js" as="script"><link rel="prefetch" href="/docs/assets/http四次挥手示意图.html-ZDaKxv3C.js" as="script"><link rel="prefetch" href="/docs/assets/三次握手可以传递数据吗.html-wb9XX_fV.js" as="script"><link rel="prefetch" href="/docs/assets/为什么需求三次握手两次不行吗.html-dr3qhBNA.js" as="script"><link rel="prefetch" href="/docs/assets/什么是半连接状态.html-d7KbKkZO.js" as="script"><link rel="prefetch" href="/docs/assets/四次挥手释放连接时，等待2MSL的意义_.html-90OT66WC.js" as="script"><link rel="prefetch" href="/docs/assets/挥手为什么需要四次.html-d1avWLJG.js" as="script"><link rel="prefetch" href="/docs/assets/常见问题.html-aM6jLBpb.js" as="script"><link rel="prefetch" href="/docs/assets/Array.of把一串数字转化为数组.html-vNhEdUfK.js" as="script"><link rel="prefetch" href="/docs/assets/js 优化小技巧.html-xmdNrUit.js" as="script"><link rel="prefetch" href="/docs/assets/padStart.html-6qnUuxXr.js" as="script"><link rel="prefetch" href="/docs/assets/常用console.html-k6VI-k5P.js" as="script"><link rel="prefetch" href="/docs/assets/ios滑动不顺畅.html-Gbzcqjai.js" as="script"><link rel="prefetch" href="/docs/assets/RGB转化为16进制.html-WoaQbesF.js" as="script"><link rel="prefetch" href="/docs/assets/两日期差的天数.html-aykw0l7-.js" as="script"><link rel="prefetch" href="/docs/assets/any、never、unknown、null、undefined、void有什么区别.html-qV4NDnXb.js" as="script"><link rel="prefetch" href="/docs/assets/implements和extends的区别.html-bMJeVkff.js" as="script"><link rel="prefetch" href="/docs/assets/interface和type的区别.html-OIST2Lkk.js" as="script"><link rel="prefetch" href="/docs/assets/枚举和常量枚举的区别.html-MXGBegJ5.js" as="script"><link rel="prefetch" href="/docs/assets/BFC的理解和应用★★★.html-DhHe9Ggn.js" as="script"><link rel="prefetch" href="/docs/assets/c003-双飞翼★★★.html-dZJ2upr9.js" as="script"><link rel="prefetch" href="/docs/assets/css实现一个三角形.html-YGm9q264.js" as="script"><link rel="prefetch" href="/docs/assets/css禁用.html-dU3uusav.js" as="script"><link rel="prefetch" href="/docs/assets/em与rem与vw的区别★★.html-0GOlyIy7.js" as="script"><link rel="prefetch" href="/docs/assets/line-height.html-MQD-1-yH.js" as="script"><link rel="prefetch" href="/docs/assets/margin塌陷.html-RVmI0A36.js" as="script"><link rel="prefetch" href="/docs/assets/position有哪些值.html-iOpcycMh.js" as="script"><link rel="prefetch" href="/docs/assets/一行文字居中，多行文字左对齐★.html-rjQyKUoT.js" as="script"><link rel="prefetch" href="/docs/assets/不设置宽高写个正方形.html-5ue0BbDi.js" as="script"><link rel="prefetch" href="/docs/assets/利用html_css绘制opera浏览器的logo.html-x0_irpmv.js" as="script"><link rel="prefetch" href="/docs/assets/合成层.html-E9OdcKuj.js" as="script"><link rel="prefetch" href="/docs/assets/实现一个元素水平垂直居中的方法★★★★.html-5X8-Judw.js" as="script"><link rel="prefetch" href="/docs/assets/手写clearfix.html-gsjHHoSQ.js" as="script"><link rel="prefetch" href="/docs/assets/盒模型宽度计算★.html-8f10FVAw.js" as="script"><link rel="prefetch" href="/docs/assets/纯数字不换行问题.html-6Mg4IaJb.js" as="script"><link rel="prefetch" href="/docs/assets/h001-前端语义化理解★★★.html-25VX-9No.js" as="script"><link rel="prefetch" href="/docs/assets/h002-块级元素和行内元素包含什么★★.html-mV8o4x4K.js" as="script"><link rel="prefetch" href="/docs/assets/h003-一些好玩的HTML的属性.html-bh0RsC4K.js" as="script"><link rel="prefetch" href="/docs/assets/r001-setState是同步还是异步.html--RxqKyvR.js" as="script"><link rel="prefetch" href="/docs/assets/r002-setState输出类面试题.html-NypyN3O6.js" as="script"><link rel="prefetch" href="/docs/assets/r003-react-diff.html--sIC-rRF.js" as="script"><link rel="prefetch" href="/docs/assets/r003-react的fiber架构.html-_SF5pnrP.js" as="script"><link rel="prefetch" href="/docs/assets/r004-react 是如何区分class和function.html-H05zSA3l.js" as="script"><link rel="prefetch" href="/docs/assets/r005-介绍Redux数据流的流程.html-8NY682DI.js" as="script"><link rel="prefetch" href="/docs/assets/r007-虚拟dom和真实dom区别.html-6K1rXYWq.js" as="script"><link rel="prefetch" href="/docs/assets/r008-react18 有哪些更新.html-THOrThEr.js" as="script"><link rel="prefetch" href="/docs/assets/r009-react组件通信.html-ZnrBOOYC.js" as="script"><link rel="prefetch" href="/docs/assets/Teleport是怎么实现选择性挂载的.html-pf1rbzNo.js" as="script"><link rel="prefetch" href="/docs/assets/reactive对象重新赋值后丢失响应而ref不会.html-MaTMsRKJ.js" as="script"><link rel="prefetch" href="/docs/assets/ref与reactive的区别.html-S-cz3YjZ.js" as="script"><link rel="prefetch" href="/docs/assets/vue3 Diff 算法的优化.html-IHOePqH1.js" as="script"><link rel="prefetch" href="/docs/assets/vue3有哪些新特性.html-2uAEhP99.js" as="script"><link rel="prefetch" href="/docs/assets/vue3的Fragment实现原理.html-Edm2ompQ.js" as="script"><link rel="prefetch" href="/docs/assets/vue3的性能提升在哪几个方面体现.html-V7vuDZIZ.js" as="script"><link rel="prefetch" href="/docs/assets/V001-vuerouter是怎么传值的.html-0csc3F4h.js" as="script"><link rel="prefetch" href="/docs/assets/V002-v-if和v-for一起使用的弊端及解决办法.html-gNQRXe3O.js" as="script"><link rel="prefetch" href="/docs/assets/V003-beforeDestory里面一般进行什么操作.html-g4ne7AdO.js" as="script"><link rel="prefetch" href="/docs/assets/V004-同级组件传值.html-wcCkPNCf.js" as="script"><link rel="prefetch" href="/docs/assets/V005-父组件如何获取子组件的属性和方法（偏基础).html-701sjeKp.js" as="script"><link rel="prefetch" href="/docs/assets/V006-watch和computed的区别.html-AES8vBk5.js" as="script"><link rel="prefetch" href="/docs/assets/V007-vue父组件和子组件的生命周期执行顺序.html-bMsZGMP4.js" as="script"><link rel="prefetch" href="/docs/assets/V008-vue的事件修饰符和作用.html-X8fdgh9m.js" as="script"><link rel="prefetch" href="/docs/assets/V009-vue中父组件监听到子组件的生命周期.html-G77-tXDg.js" as="script"><link rel="prefetch" href="/docs/assets/V010-vue中的keep-alive介绍下吧.html-bhA4hpaT.js" as="script"><link rel="prefetch" href="/docs/assets/V011-vue如何解决页面不重新渲染问题呢.html--FDeT2-M.js" as="script"><link rel="prefetch" href="/docs/assets/V012-说一哈什么是MVVM.html-QHF9tLg5.js" as="script"><link rel="prefetch" href="/docs/assets/V013-说一下数据绑定的原理★★★★.html-OYXJGbKH.js" as="script"><link rel="prefetch" href="/docs/assets/V014-vue组件通信的几种方式.html-PLuiR_s3.js" as="script"><link rel="prefetch" href="/docs/assets/V015-如果子组件改变props里面的数据会发生什么？.html-nAFaQ8mx.js" as="script"><link rel="prefetch" href="/docs/assets/V016-props怎么自定义验证.html-BtkOf5oH.js" as="script"><link rel="prefetch" href="/docs/assets/V017-vue模版的编译原理.html-u_vG7pNm.js" as="script"><link rel="prefetch" href="/docs/assets/S015-手写map方法.html-9zkuJhbm.js" as="script"><link rel="prefetch" href="/docs/assets/vue项目中使用可选链 ( _. )和双问号 ( __.html-d6N0S951.js" as="script"><link rel="prefetch" href="/docs/assets/1.子应用路由跳转.html-RM-vAnP_.js" as="script"><link rel="prefetch" href="/docs/assets/qiankun的各个生命周期钩子是来做什么的.html-ZIOtoUw6.js" as="script"><link rel="prefetch" href="/docs/assets/react18主应用集成vue3及react18的qiankun模板.html-aKwavYxp.js" as="script"><link rel="prefetch" href="/docs/assets/微应用需要支持跨域访问.html-3Z5TjAE0.js" as="script"><link rel="prefetch" href="/docs/assets/Linux 常用命令.html-1N9Iqtgb.js" as="script"><link rel="prefetch" href="/docs/assets/Linux 常用命令vim.html-I7FUcdyG.js" as="script"><link rel="prefetch" href="/docs/assets/Docker 安装 mysql.html--mjtCuUt.js" as="script"><link rel="prefetch" href="/docs/assets/Docker安装ElasticSearch.html-C1VJW59N.js" as="script"><link rel="prefetch" href="/docs/assets/docker 常用的命令.html-RbBDG5cM.js" as="script"><link rel="prefetch" href="/docs/assets/docker安装minio.html-v8myjOCU.js" as="script"><link rel="prefetch" href="/docs/assets/docker安装nginx.html-kV6ILA4F.js" as="script"><link rel="prefetch" href="/docs/assets/mac 上安装docker.html-jRpoLtsD.js" as="script"><link rel="prefetch" href="/docs/assets/华为云HECS服务器安装docker.html-R7EM94vr.js" as="script"><link rel="prefetch" href="/docs/assets/阿里云服务器安装docker.html-ycFXbiTV.js" as="script"><link rel="prefetch" href="/docs/assets/Mac OS设置JAVA_HOME环境变量.html-CHUkThp1.js" as="script"><link rel="prefetch" href="/docs/assets/搭建一个websocket聊天室.html-JEH1s2m5.js" as="script"><link rel="prefetch" href="/docs/assets/mac上安装mongodb.html-xmE6KaWv.js" as="script"><link rel="prefetch" href="/docs/assets/mongo可视化工具.html-Iz_aNVB1.js" as="script"><link rel="prefetch" href="/docs/assets/DDL.html-RUUEeEpx.js" as="script"><link rel="prefetch" href="/docs/assets/启用jar包.html-MbmFCYSv.js" as="script"><link rel="prefetch" href="/docs/assets/登录云服务器.html-QPfZitLp.js" as="script"><link rel="prefetch" href="/docs/assets/端口被占用.html-KTiBnfvd.js" as="script"><link rel="prefetch" href="/docs/assets/通过命令上传文件到云服务器.html-bGYntjOp.js" as="script"><link rel="prefetch" href="/docs/assets/Nginx config 配置.html-8EeR8SmG.js" as="script"><link rel="prefetch" href="/docs/assets/Nginx 汇总篇.html-k8duqYod.js" as="script"><link rel="prefetch" href="/docs/assets/Nginx.html-cEVuTf4o.js" as="script"><link rel="prefetch" href="/docs/assets/Nginx常用命令.html-vbuztbxU.js" as="script"><link rel="prefetch" href="/docs/assets/Nginx缓存相关.html-CtfyOoSO.js" as="script"><link rel="prefetch" href="/docs/assets/Nginx配置root、alias、try_files、proxy_pass指令分析.html-1e1f1Dst.js" as="script"><link rel="prefetch" href="/docs/assets/前端项目部署.html-6olamwys.js" as="script"><link rel="prefetch" href="/docs/assets/设置index.html页面不缓存.html-o2anDKuR.js" as="script"><link rel="prefetch" href="/docs/assets/jenkins _ GitHub 实现项目自动化部署.html-fhAQTS2C.js" as="script"><link rel="prefetch" href="/docs/assets/服务器安装jenkins.html-q9GVL7oP.js" as="script"><link rel="prefetch" href="/docs/assets/定义常量的好用方法.html-pTaAQpLg.js" as="script"><link rel="prefetch" href="/docs/assets/常见的一些review问题.html-ni_EFIGn.js" as="script"><link rel="prefetch" href="/docs/assets/swiper 鼠标点击分页后不自动开始轮播.html-evX2tzZ5.js" as="script"><link rel="prefetch" href="/docs/assets/e001-执行打印001.html-YkrIFYJT.js" as="script"><link rel="prefetch" href="/docs/assets/e002-promise和setTimeout执行.html-hPhDa3TW.js" as="script"><link rel="prefetch" href="/docs/assets/e003-执行打印003.html-YFf7G6Sx.js" as="script"><link rel="prefetch" href="/docs/assets/e004-执行打印004.html-ySykbjd9.js" as="script"><link rel="prefetch" href="/docs/assets/e005-执行打印005.html-W2UKhici.js" as="script"><link rel="prefetch" href="/docs/assets/property和attribute区别.html-fB_TQ_Nm.js" as="script"><link rel="prefetch" href="/docs/assets/window.onload和DOMContentLoaded区别.html-e1Q9Hdur.js" as="script"><link rel="prefetch" href="/docs/assets/事件委托的优缺点.html-AFmXLg2N.js" as="script"><link rel="prefetch" href="/docs/assets/事件委托类.html-Vg0XufzB.js" as="script"><link rel="prefetch" href="/docs/assets/事件捕获和事件冒泡.html-V95QmlMF.js" as="script"><link rel="prefetch" href="/docs/assets/持久化链接and管线化★★.html-egN8ry6b.js" as="script"><link rel="prefetch" href="/docs/assets/P-001执行打印.html-eEFUSzSb.js" as="script"><link rel="prefetch" href="/docs/assets/async await 的错误捕获.html-QzOuWIwF.js" as="script"><link rel="prefetch" href="/docs/assets/promise 的链式调用.html-vseM59vY.js" as="script"><link rel="prefetch" href="/docs/assets/promise.all 和promise.allSettled 的区别.html-1qPojmCy.js" as="script"><link rel="prefetch" href="/docs/assets/promise执行打印.html-axouP4YX.js" as="script"><link rel="prefetch" href="/docs/assets/实现一个mergePromise.html-GpTlqaz4.js" as="script"><link rel="prefetch" href="/docs/assets/实现一个异步加载图片的方法.html-xhCIO9gP.js" as="script"><link rel="prefetch" href="/docs/assets/T001-this指向.html-DuuadkCv.js" as="script"><link rel="prefetch" href="/docs/assets/T002-this.html-y1eEYP7T.js" as="script"><link rel="prefetch" href="/docs/assets/T003-this打印.html-ENYyMiMm.js" as="script"><link rel="prefetch" href="/docs/assets/T004-this大全上篇.html-vQ5LDisa.js" as="script"><link rel="prefetch" href="/docs/assets/T005-this大全下篇.html-v5EjZhJp.js" as="script"><link rel="prefetch" href="/docs/assets/this的典型应用.html-KVuCsWsk.js" as="script"><link rel="prefetch" href="/docs/assets/函数的副作用.html-uYbm9903.js" as="script"><link rel="prefetch" href="/docs/assets/F001-for后面加一个（；）.html-uSOxvQLV.js" as="script"><link rel="prefetch" href="/docs/assets/F002-return换行后自动添加分号.html-kGedN5NH.js" as="script"><link rel="prefetch" href="/docs/assets/y001-基础知识.html-3X0CZWA9.js" as="script"><link rel="prefetch" href="/docs/assets/y002-创建对象的三种方式.html-xLTY0zP3.js" as="script"><link rel="prefetch" href="/docs/assets/y004-执行打印.html-rMY1Il_Y.js" as="script"><link rel="prefetch" href="/docs/assets/2-32的随机整数.html-QXmN6MVW.js" as="script"><link rel="prefetch" href="/docs/assets/JSON.stringfy和JSON.parse的弊端.html-GgGNZfeM.js" as="script"><link rel="prefetch" href="/docs/assets/Q003-打印输出.html-i650ELbq.js" as="script"><link rel="prefetch" href="/docs/assets/Q004-instanceOf与typeof的区别★★.html-rxsfFWep.js" as="script"><link rel="prefetch" href="/docs/assets/Q005-document.ready与window.onload.html-h8ZFGYms.js" as="script"><link rel="prefetch" href="/docs/assets/Q006-比较instanceof和typeof.html-BN1NbcpG.js" as="script"><link rel="prefetch" href="/docs/assets/Q007-call和apply及bind区别.html-rSWFtnEZ.js" as="script"><link rel="prefetch" href="/docs/assets/Q008-输出一个数的7的倍数.html-LUpfgNSs.js" as="script"><link rel="prefetch" href="/docs/assets/Q009-判断一个元素是否在可视区中.html-Wa9IiP7-.js" as="script"><link rel="prefetch" href="/docs/assets/Q010 判断js的数据类型.html-lpc_TB-r.js" as="script"><link rel="prefetch" href="/docs/assets/Q011-Object.prototype.toString().call为什么判断类型时候这么准.html-sEq7YRVS.js" as="script"><link rel="prefetch" href="/docs/assets/defer和async的区别.html-uJGXDzAq.js" as="script"><link rel="prefetch" href="/docs/assets/jquery中如何找到selecte标签中的选中项.html-ADNHHk2_.js" as="script"><link rel="prefetch" href="/docs/assets/js动画与css动画差异性★★.html-qLaKscqx.js" as="script"><link rel="prefetch" href="/docs/assets/js的new操作符做了哪些.html-EoOmTjc_.js" as="script"><link rel="prefetch" href="/docs/assets/require查包的过程.html-ZUzJI44-.js" as="script"><link rel="prefetch" href="/docs/assets/sort排序原理.html-q5r2VvF-.js" as="script"><link rel="prefetch" href="/docs/assets/this和_(this)在jquery中会有何不同.html-FqvHHKGn.js" as="script"><link rel="prefetch" href="/docs/assets/typeof的返回值.html-P0rMgfDM.js" as="script"><link rel="prefetch" href="/docs/assets/两个 script _第一个报错_第二个是否会继续解析★.html-bghCbP0A.js" as="script"><link rel="prefetch" href="/docs/assets/何时使用三等何时使用两等.html-yTfDUYc6.js" as="script"><link rel="prefetch" href="/docs/assets/使元素消失的方法.html-3zb3xh7z.js" as="script"><link rel="prefetch" href="/docs/assets/判断两个对象是否相等.html-QhPHpEJk.js" as="script"><link rel="prefetch" href="/docs/assets/如何在b字符串中找到a字符串的位置，a， b字符串长度未知，不能使用字符串方法，不能使用数组方法.html-9Mx_GVit.js" as="script"><link rel="prefetch" href="/docs/assets/字符串去空格.html-FIjm0uxd.js" as="script"><link rel="prefetch" href="/docs/assets/定义一个log方法，可以取代console.log.html-Dkl8O8p9.js" as="script"><link rel="prefetch" href="/docs/assets/实现函数isInteger.html-k0TuTkQz.js" as="script"><link rel="prefetch" href="/docs/assets/将字符串转成特定树形结构.html-hc-5rE5y.js" as="script"><link rel="prefetch" href="/docs/assets/手写数组反转.html-HPO6sqcB.js" as="script"><link rel="prefetch" href="/docs/assets/打印输出.html-3OcqqwUe.js" as="script"><link rel="prefetch" href="/docs/assets/编写函数获得对象中的值666，必须使用到 str _ 'a.b.c'.html-0LbTO3vY.js" as="script"><link rel="prefetch" href="/docs/assets/获取dom的几种方法★.html-jW7QjpiK.js" as="script"><link rel="prefetch" href="/docs/assets/B001-偶然创建的全局变量.html-M7g_RQLy.js" as="script"><link rel="prefetch" href="/docs/assets/B002-变量的提升.html-Z5mBFhkY.js" as="script"><link rel="prefetch" href="/docs/assets/B003-变量提升2★.html-HlB7B_Ma.js" as="script"><link rel="prefetch" href="/docs/assets/B004-变量提升★.html-x-pV3Zcm.js" as="script"><link rel="prefetch" href="/docs/assets/B005-变量提升.html-ipLiht9O.js" as="script"><link rel="prefetch" href="/docs/assets/B006-truly和falsely变量.html-FY8-p-mb.js" as="script"><link rel="prefetch" href="/docs/assets/B007-作用域和自由变量的场景题.html-627CGqWp.js" as="script"><link rel="prefetch" href="/docs/assets/B008-变量提升★.html-g7vONdHp.js" as="script"><link rel="prefetch" href="/docs/assets/B009-变量提升.html-pOP0nXyz.js" as="script"><link rel="prefetch" href="/docs/assets/B010-(a__ 1 __ a __2 __ a__3)可能为true吗.html-S8SorjX2.js" as="script"><link rel="prefetch" href="/docs/assets/B011-变量输出.html-8v46xi-V.js" as="script"><link rel="prefetch" href="/docs/assets/B012-变量提升.html-xGltLDZt.js" as="script"><link rel="prefetch" href="/docs/assets/B013-变量输出类.html-QsjCfj1n.js" as="script"><link rel="prefetch" href="/docs/assets/B014-变量提升.html-mN_2BNrE.js" as="script"><link rel="prefetch" href="/docs/assets/B015-检测一个变量是String类型.html-OyaOYxD-.js" as="script"><link rel="prefetch" href="/docs/assets/B016-变量提升类.html-Fl5kk-Mt.js" as="script"><link rel="prefetch" href="/docs/assets/!__结果是什么.html-49DgF6tG.js" as="script"><link rel="prefetch" href="/docs/assets/分组选择符.html-2vqi1P6P.js" as="script"><link rel="prefetch" href="/docs/assets/what is NAN.html-Blxn1pdT.js" as="script"><link rel="prefetch" href="/docs/assets/D001-return分号问题.html-dasE3K8e.js" as="script"><link rel="prefetch" href="/docs/assets/D002-打印输出.html-h00LMbo2.js" as="script"><link rel="prefetch" href="/docs/assets/D003-fetch封装最大并发请求★★★.html-JnQKwedE.js" as="script"><link rel="prefetch" href="/docs/assets/D004-vue的filter中可不可以获取_vm★.html-nqKM7GMK.js" as="script"><link rel="prefetch" href="/docs/assets/D005-vue实现响应式原理即vue如何监听data的每个属性的变化★★★★.html-7hx0bsCg.js" as="script"><link rel="prefetch" href="/docs/assets/D006-作用域和作用域链★★★.html-gObt6VlX.js" as="script"><link rel="prefetch" href="/docs/assets/D008-DOM绑定事件的几种方式★★.html-RcXZ88K7.js" as="script"><link rel="prefetch" href="/docs/assets/D009-递归类.html-Y8vpT5dY.js" as="script"><link rel="prefetch" href="/docs/assets/D010-_1_2_3_.map(parseInt).html-D5HrAAcX.js" as="script"><link rel="prefetch" href="/docs/assets/D011-map和set的区别.html-awFPZq2A.js" as="script"><link rel="prefetch" href="/docs/assets/D012-垃圾回收机制及内存管理.html-UvuMRfZw.js" as="script"><link rel="prefetch" href="/docs/assets/D013-开发中遇到的内存泄漏如何解决的.html-VhAx45Zg.js" as="script"><link rel="prefetch" href="/docs/assets/forEach究竟能不能改变数组的值★.html-Om2j34AO.js" as="script"><link rel="prefetch" href="/docs/assets/async(eventLoop类问题).html-rGsqxqLI.js" as="script"><link rel="prefetch" href="/docs/assets/asyncawait和promise关系.html-SBcK0M3T.js" as="script"><link rel="prefetch" href="/docs/assets/for-of循环.html-lk1nnYzl.js" as="script"><link rel="prefetch" href="/docs/assets/promise.html-V3FX6Ods.js" as="script"><link rel="prefetch" href="/docs/assets/宏任务和微任务.html-PKvNl9Su.js" as="script"><link rel="prefetch" href="/docs/assets/实现sleep一秒的几种方式.html-mBdKXl4V.js" as="script"><link rel="prefetch" href="/docs/assets/实现一个promise.retry方法.html-oUAAOycB.js" as="script"><link rel="prefetch" href="/docs/assets/异步打印类async function async1() _.html-iFCaW-H-.js" as="script"><link rel="prefetch" href="/docs/assets/循环中的setTimeout按顺序执行.html-fySOiUKz.js" as="script"><link rel="prefetch" href="/docs/assets/删除树结构中无用的节点.html-ZSqeK_Ii.js" as="script"><link rel="prefetch" href="/docs/assets/将树结构拍平为一维数组.html-oQiFLoPM.js" as="script"><link rel="prefetch" href="/docs/assets/Arr001-数组的length属性.html-X8AYaImV.js" as="script"><link rel="prefetch" href="/docs/assets/Arr002-数组的直接赋值.html--qny5jBJ.js" as="script"><link rel="prefetch" href="/docs/assets/Arr003-数组的最大最小值.html-u-yYd6p4.js" as="script"><link rel="prefetch" href="/docs/assets/Arr004-返回数组中所有真值元素的新数组.html-7bjTTNVd.js" as="script"><link rel="prefetch" href="/docs/assets/Arr005-合并两个数组.html-zljyct4u.js" as="script"><link rel="prefetch" href="/docs/assets/Arr006-判断是否是数组的几种方法.html-Paob4Gfo.js" as="script"><link rel="prefetch" href="/docs/assets/Arr007-删除两个数组的相同元素.html-oQkVX_W4.js" as="script"><link rel="prefetch" href="/docs/assets/S001-实现浅拷贝★.html-4hJNGkIz.js" as="script"><link rel="prefetch" href="/docs/assets/S002-数字转化为逗号金钱格式★.html-BF4Z1rpF.js" as="script"><link rel="prefetch" href="/docs/assets/S003-数组扁平化★.html-BcckzeSY.js" as="script"><link rel="prefetch" href="/docs/assets/S004-冒泡排序★.html-Y3tbA_xS.js" as="script"><link rel="prefetch" href="/docs/assets/S005-手写bind.html-qCHdwIEl.js" as="script"><link rel="prefetch" href="/docs/assets/S006-手写斐波那契数列.html-kZeWusFH.js" as="script"><link rel="prefetch" href="/docs/assets/S014-手写EventHub（发布订阅）★★★.html-EIwHSEky.js" as="script"><link rel="prefetch" href="/docs/assets/S015-手写map方法.html-rHsV9f4e.js" as="script"><link rel="prefetch" href="/docs/assets/S016-手写查找公用数组前缀.html-HgzQXQ7r.js" as="script"><link rel="prefetch" href="/docs/assets/S017-字符串最长的不重复子串.html-9NWivf2P.js" as="script"><link rel="prefetch" href="/docs/assets/S018-手写数组中第一个没出现的最小正整数.html--fAfN4IF.js" as="script"><link rel="prefetch" href="/docs/assets/S019-在既定的数据源生成随机数组.html-GKKi2gAq.js" as="script"><link rel="prefetch" href="/docs/assets/S020-手写虚拟Dom转化为真实Dom★★★★.html-M-xfFCY9.js" as="script"><link rel="prefetch" href="/docs/assets/S021-setTimeout实现setInterval.html-AYe4sEMU.js" as="script"><link rel="prefetch" href="/docs/assets/S022-手写new.html-OtDFz6ca.js" as="script"><link rel="prefetch" href="/docs/assets/S023手写一个寄生组合继承.html-9etvjydA.js" as="script"><link rel="prefetch" href="/docs/assets/S024手写快排★.html-XTZ2eUEL.js" as="script"><link rel="prefetch" href="/docs/assets/S025手写promise.html-TEfLEsSH.js" as="script"><link rel="prefetch" href="/docs/assets/S026-一维数组转为树结构.html--ySfg6D-.js" as="script"><link rel="prefetch" href="/docs/assets/S027-函数柯理化★★.html-DPayhbx8.js" as="script"><link rel="prefetch" href="/docs/assets/S028-实现有并行限制的 Promise 调度器.html--Pm5rJPm.js" as="script"><link rel="prefetch" href="/docs/assets/S029-异步控制并发数.html-j0rwfhaG.js" as="script"><link rel="prefetch" href="/docs/assets/S030-获取url参数的方法.html-pxHUVh6s.js" as="script"><link rel="prefetch" href="/docs/assets/S031-手写instanceof.html-zz-b-o6-.js" as="script"><link rel="prefetch" href="/docs/assets/S032-手写Promise加载图片.html-g7nPeBEa.js" as="script"><link rel="prefetch" href="/docs/assets/S033-创建10个标签，点击的时候弹出来对应的序号.html-ccUJ-dfS.js" as="script"><link rel="prefetch" href="/docs/assets/S034-函数实现一秒输出一个数.html-g-BYXhXH.js" as="script"><link rel="prefetch" href="/docs/assets/S035-手写一个带并发限制的异步调度器Schduler.html-EiMJ7e3P.js" as="script"><link rel="prefetch" href="/docs/assets/S036-手写const.html-JMr2njYD.js" as="script"><link rel="prefetch" href="/docs/assets/S037-实现一个LRU缓存函数.html--KDqduNw.js" as="script"><link rel="prefetch" href="/docs/assets/S038-手写async，await的实现.html-wcg_bcUT.js" as="script"><link rel="prefetch" href="/docs/assets/S039-单调递增子序列★★★.html-G2SFyrxU.js" as="script"><link rel="prefetch" href="/docs/assets/S040-手写compose和pipe函数.html-VlQiUg-k.js" as="script"><link rel="prefetch" href="/docs/assets/S041-手写call和apply.html--1LnO-da.js" as="script"><link rel="prefetch" href="/docs/assets/S042-实现一个LazyMan.html-akYCvNhe.js" as="script"><link rel="prefetch" href="/docs/assets/S043-Object.is.html-9F2aqiWW.js" as="script"><link rel="prefetch" href="/docs/assets/S044-手写原生的ajax请求.html-1dXjigWw.js" as="script"><link rel="prefetch" href="/docs/assets/S045-手写JSON.parse.html-PGEo5Lkv.js" as="script"><link rel="prefetch" href="/docs/assets/S046-手写Promise.allSettled.html-VOOOLYzU.js" as="script"><link rel="prefetch" href="/docs/assets/S047-多tab通信.html-gc0_1elt.js" as="script"><link rel="prefetch" href="/docs/assets/s007-手写一个数据双向绑定.html-tPGPmMpa.js" as="script"><link rel="prefetch" href="/docs/assets/s008-手写函数节流★★.html-K9lxPkf1.js" as="script"><link rel="prefetch" href="/docs/assets/s009-手写函数防抖★★.html-DGftsVnp.js" as="script"><link rel="prefetch" href="/docs/assets/s010-手写深度比较.html-IAIlc9ui.js" as="script"><link rel="prefetch" href="/docs/assets/s011-手写深拷贝★★.html-8NhKygkw.js" as="script"><link rel="prefetch" href="/docs/assets/s012-手写promiseAll.html-0S6aRJaP.js" as="script"><link rel="prefetch" href="/docs/assets/s013-书写promiseRace.html-f_WmiLXm.js" as="script"><link rel="prefetch" href="/docs/assets/树形结构转数组.html-lMD3Mpkq.js" as="script"><link rel="prefetch" href="/docs/assets/Y001-浮点运算.html-V-za74m5.js" as="script"><link rel="prefetch" href="/docs/assets/Y002-console运算结果.html-NM81V-BE.js" as="script"><link rel="prefetch" href="/docs/assets/Y003-强制和隐式类型转换.html-VpYUCVju.js" as="script"><link rel="prefetch" href="/docs/assets/Y004-隐式转换2.html-EzxySUGH.js" as="script"><link rel="prefetch" href="/docs/assets/Y005-两大数相加★.html-GwjctLhv.js" as="script"><link rel="prefetch" href="/docs/assets/Y006-字符串转为数字.html-OrKxZlkW.js" as="script"><link rel="prefetch" href="/docs/assets/Y007-精度丢失问题.html-B-FdsxWx.js" as="script"><link rel="prefetch" href="/docs/assets/Y008-实现函数isInteger.html-YtShp6vH.js" as="script"><link rel="prefetch" href="/docs/assets/Y009-_1_2_3_.map(parseInt).html-0cSuoiZ6.js" as="script"><link rel="prefetch" href="/docs/assets/Y010-四舍五入保留两位有效数字.html-dt4Zy16L.js" as="script"><link rel="prefetch" href="/docs/assets/toPrecision.html-nydAEtzz.js" as="script"><link rel="prefetch" href="/docs/assets/hash 与 history 的区别.html-XKwarlyz.js" as="script"><link rel="prefetch" href="/docs/assets/B-001.html-ccLzNY-g.js" as="script"><link rel="prefetch" href="/docs/assets/B-002经典闭包.html-258Rl7Ph.js" as="script"><link rel="prefetch" href="/docs/assets/B-003.html-ig2ZXFfx.js" as="script"><link rel="prefetch" href="/docs/assets/B-004.html-MHCByiBY.js" as="script"><link rel="prefetch" href="/docs/assets/B-005.html-kdnhd_ui.js" as="script"><link rel="prefetch" href="/docs/assets/B-006let a _ 0_ b _ 0 function fn(a) _   fn _ function fn2(b) _     console.log(__a_b)_   _   console.log(a__)_ _ .html-iOvxemAz.js" as="script"><link rel="prefetch" href="/docs/assets/B-006let a _ 0_ b _ 0 function fn(a) _   fn _ function fn2(b) _     console.log(__a_b)_   _   console.log(a__)_ _ fn(1)   fn(2) .html-fpvLexGp.js" as="script"><link rel="prefetch" href="/docs/assets/B-008.html-K0wEEgX4.js" as="script"><link rel="prefetch" href="/docs/assets/B007.html-rxeh7GI2.js" as="script"><link rel="prefetch" href="/docs/assets/什么是闭包.html-FJo5_7AN.js" as="script"><link rel="prefetch" href="/docs/assets/001-什么是react的合成事件.html--cW-7706.js" as="script"><link rel="prefetch" href="/docs/assets/002-函数组件与类组件的区别 copy.html-TYuTuZxo.js" as="script"><link rel="prefetch" href="/docs/assets/003-什么是受控组件和非受控组件.html-SOgMRONE.js" as="script"><link rel="prefetch" href="/docs/assets/tomcat常用命令.html-FDbqQ0jp.js" as="script"><link rel="prefetch" href="/docs/assets/2.微应用加载流程分析.html-VUPKbuKa.js" as="script"><link rel="prefetch" href="/docs/assets/Proxy是如何监听数组的.html-cKXK_dN-.js" as="script"><link rel="prefetch" href="/docs/assets/Proxy的原理.html-9WNqkYx1.js" as="script"><link rel="prefetch" href="/docs/assets/Reflect和Proxy.html-zSayfUeJ.js" as="script"><link rel="prefetch" href="/docs/assets/proxy的基本使用.html-B9a6AAa7.js" as="script"><link rel="prefetch" href="/docs/assets/如何实现无缝轮播.html-QoXkSgXR.js" as="script"><link rel="prefetch" href="/docs/assets/S00-输出内容.html-aypB3mws.js" as="script"><link rel="prefetch" href="/docs/assets/压缩字符串.html-v2Euv60J.js" as="script"><link rel="prefetch" href="/docs/assets/字符串中最长连续数字.html-WVJY0baO.js" as="script"><link rel="prefetch" href="/docs/assets/字符串转驼峰处理.html-wSrLr3wc.js" as="script"><link rel="prefetch" href="/docs/assets/洗牌算法.html-2gyFg88u.js" as="script"><link rel="prefetch" href="/docs/assets/cold-001版本号排序的方法.html-mvW9pEmc.js" as="script"><link rel="prefetch" href="/docs/assets/cold-002实现JSON.parse.html-iacZy8GD.js" as="script"><link rel="prefetch" href="/docs/assets/cold-003判断一个对象有环引用.html--_tCxa4k.js" as="script"><link rel="prefetch" href="/docs/assets/cold-004判断一个对象的层数.html-adbZrpZ5.js" as="script"><link rel="prefetch" href="/docs/assets/cold-005实现lazyMan函数.html-nZxKinpK.js" as="script"><link rel="prefetch" href="/docs/assets/字符串中大小字母转换.html-Cgp-LZ_w.js" as="script"><link rel="prefetch" href="/docs/assets/404.html-sjP-ulaz.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/docs/" class=""><!----><span class="site-name">你好， qdleader ！</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="http"><span class="title">http</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="http"><span class="title">http</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/docs/http/http007-TCP和UDP的区别.md" class="" aria-label="http007-TCP和UDP的区别.md"><!--[--><!--]--> http007-TCP和UDP的区别.md <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端面试题"><span class="title">前端面试题</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端面试题"><span class="title">前端面试题</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/docs/前端面试题/手写类/S015-手写map方法.md" class="" aria-label="S015-手写map方法"><!--[--><!--]--> S015-手写map方法 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="npm"><span class="title">npm</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="npm"><span class="title">npm</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/docs/npm/如何使用内网npm.md" class="" aria-label="npm"><!--[--><!--]--> npm <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/docs/#npm" class="" aria-label="npm2"><!--[--><!--]--> npm2 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/docs/npm/package.json中库的版本号详解(^和~区别).md" class="" aria-label="json中库的版本号详解"><!--[--><!--]--> json中库的版本号详解 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/docs/npm/packagejson常用字段介绍.md" class="" aria-label="packagejson常用字段介绍"><!--[--><!--]--> packagejson常用字段介绍 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="支付"><span class="title">支付</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="支付"><span class="title">支付</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/docs/支付/h5微信外浏览器微信支付跳转白页面的优化.md" class="" aria-label="h5微信外浏览器微信支付跳转白页面的优化"><!--[--><!--]--> h5微信外浏览器微信支付跳转白页面的优化 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/docs/支付/h5微信支付.md" class="" aria-label="h5微信支付"><!--[--><!--]--> h5微信支付 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/docs/支付/h5的支付宝支付.md" class="" aria-label="h5的支付宝支付"><!--[--><!--]--> h5的支付宝支付 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/qdleader/qdleader" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="http"><span class="title">http</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="http"><span class="title">http</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/docs/http/http007-TCP和UDP的区别.md" class="" aria-label="http007-TCP和UDP的区别.md"><!--[--><!--]--> http007-TCP和UDP的区别.md <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端面试题"><span class="title">前端面试题</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端面试题"><span class="title">前端面试题</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/docs/前端面试题/手写类/S015-手写map方法.md" class="" aria-label="S015-手写map方法"><!--[--><!--]--> S015-手写map方法 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="npm"><span class="title">npm</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="npm"><span class="title">npm</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/docs/npm/如何使用内网npm.md" class="" aria-label="npm"><!--[--><!--]--> npm <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/docs/#npm" class="" aria-label="npm2"><!--[--><!--]--> npm2 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/docs/npm/package.json中库的版本号详解(^和~区别).md" class="" aria-label="json中库的版本号详解"><!--[--><!--]--> json中库的版本号详解 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/docs/npm/packagejson常用字段介绍.md" class="" aria-label="packagejson常用字段介绍"><!--[--><!--]--> packagejson常用字段介绍 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="支付"><span class="title">支付</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="支付"><span class="title">支付</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/docs/支付/h5微信外浏览器微信支付跳转白页面的优化.md" class="" aria-label="h5微信外浏览器微信支付跳转白页面的优化"><!--[--><!--]--> h5微信外浏览器微信支付跳转白页面的优化 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/docs/支付/h5微信支付.md" class="" aria-label="h5微信支付"><!--[--><!--]--> h5微信支付 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/docs/支付/h5的支付宝支付.md" class="" aria-label="h5的支付宝支付"><!--[--><!--]--> h5的支付宝支付 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/qdleader/qdleader" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading"> <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/docs/%E5%BE%AE%E5%89%8D%E7%AB%AF/qiankun/%E5%8E%9F%E7%90%86%E6%8E%A2%E7%A9%B6/1.%E4%B9%BE%E5%9D%A4%E7%9A%84%E6%B2%99%E7%AE%B1%E9%9A%94%E7%A6%BB%E6%9C%BA%E5%88%B6.html#乾坤沙箱机制" class="router-link-active router-link-exact-active sidebar-item" aria-label="乾坤沙箱机制"><!--[--><!--]--> 乾坤沙箱机制 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/docs/%E5%BE%AE%E5%89%8D%E7%AB%AF/qiankun/%E5%8E%9F%E7%90%86%E6%8E%A2%E7%A9%B6/1.%E4%B9%BE%E5%9D%A4%E7%9A%84%E6%B2%99%E7%AE%B1%E9%9A%94%E7%A6%BB%E6%9C%BA%E5%88%B6.html#支持多应用的代理沙箱-极简版" class="router-link-active router-link-exact-active sidebar-item" aria-label="支持多应用的代理沙箱-极简版"><!--[--><!--]--> 支持多应用的代理沙箱-极简版 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/docs/%E5%BE%AE%E5%89%8D%E7%AB%AF/qiankun/%E5%8E%9F%E7%90%86%E6%8E%A2%E7%A9%B6/1.%E4%B9%BE%E5%9D%A4%E7%9A%84%E6%B2%99%E7%AE%B1%E9%9A%94%E7%A6%BB%E6%9C%BA%E5%88%B6.html#proxysandbox-源码解析" class="router-link-active router-link-exact-active sidebar-item" aria-label="ProxySandbox 源码解析"><!--[--><!--]--> ProxySandbox 源码解析 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h2 id="乾坤沙箱机制" tabindex="-1"><a class="header-anchor" href="#乾坤沙箱机制" aria-hidden="true">#</a> 乾坤沙箱机制</h2><p>我们把Js隔离机制常常称作沙箱，事实上，乾坤有三种Js隔离机制，并且在源代码中也是以 SnapshotSandbox、LegacySandbox、ProxySandbox三个类名来指代三种不同的隔离机制。下文我们统一以快照沙箱、支持单应用的代理沙箱、支持多应用的代理沙箱，来代表这三种不同的Js隔离机制。</p><p>那么问题来了，隔离就隔离，怎么有这么多沙箱？一开始乾坤也只有一种沙箱叫“快照沙箱”，也就是由SnapshotSandbox类来实现的沙箱。这个沙箱有个缺点，就是需要遍历window上的所有属性，性能较差。随着ES6的普及，利用Proxy可以比较良好的解决这个问题，这就诞生了LegacySandbox，可以实现和快照沙箱一样的功能，但是却性能更好，和SnapshotSandbox一样，由于会污染全局的window，LegacySandbox也仅仅允许页面同时运行一个微应用，所以我们也称LegacySandbox为支持单应用的代理沙箱。</p><p>从LegacySandbox这个类名可以看出，一开始肯定是不叫LegacySandbox，是因为有了更好的机制，才将这个名字强加给它了。那这个更好的机制是什么呢，就是ProxySandbox，它可以支持一个页面运行多个微应用，因此我们称ProxySandbox为支持多应用的代理沙箱。事实上，LegacySandbox在未来应该会消失，因为LegacySandbox可以做的事情，ProxySandbox都可以做，而SanpsshotSandbox因为向下兼容的原因反而会和ProxySandbox长期并存。下面我们就编码实现这三种沙箱机制的核心逻辑。 编码实现三个沙箱的核心逻辑 为了理解方便，下文我会用最简单的逻辑最基础的语法来实现三个沙箱，逻辑肯定不会很严密，但可以方便我们更快速的理解其中的原理。</p><p>快照沙箱-极简版</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">SnapshotSandBox</span><span class="token punctuation">{</span>
    windowSnapshot <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    modifyPropsMap <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">active</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> prop <span class="token keyword">in</span> window<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>windowSnapshot<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> window<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>modifyPropsMap<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">prop</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            window<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>modifyPropsMap<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">inactive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> prop <span class="token keyword">in</span> window<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>window<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>windowSnapshot<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>modifyPropsMap<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> window<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
                window<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>windowSnapshot<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 验证:</span>
<span class="token keyword">let</span> snapshotSandBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SnapshotSandBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
snapshotSandBox<span class="token punctuation">.</span><span class="token function">active</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>city <span class="token operator">=</span> <span class="token string">&#39;Beijing&#39;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;window.city-01:&quot;</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>city<span class="token punctuation">)</span><span class="token punctuation">;</span>
snapshotSandBox<span class="token punctuation">.</span><span class="token function">inactive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;window.city-02:&quot;</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>city<span class="token punctuation">)</span><span class="token punctuation">;</span>
snapshotSandBox<span class="token punctuation">.</span><span class="token function">active</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;window.city-03:&quot;</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>city<span class="token punctuation">)</span><span class="token punctuation">;</span>
snapshotSandBox<span class="token punctuation">.</span><span class="token function">inactive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//输出：</span>
<span class="token comment">//window.city-01: Beijing</span>
<span class="token comment">//window.city-02: undefined</span>
<span class="token comment">//window.city-03: Beijing</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>从上面的代码可以看出，快照沙箱的核心逻辑很简单，就是在激活沙箱和沙箱失活的时候各做两件事情。</p><p>注：沙箱激活 就是此时我们的微应用处于运行中，这个阶段有可能对window上的属性进行操作改变；沙箱失活 就是此时我们的微应用已经停止了对window的影响</p><h4 id="在沙箱激活的时候" tabindex="-1"><a class="header-anchor" href="#在沙箱激活的时候" aria-hidden="true">#</a> 在沙箱激活的时候：</h4><p>记录window当时的状态（我们把这个状态称之为快照，也就是快照沙箱这个名称的来源）； 恢复上一次沙箱失活时记录的沙箱运行过程中对window做的状态改变，也就是上一次沙箱激活后对window做了哪些改变，现在也保持一样的改变。</p><h4 id="在沙箱失活的时候" tabindex="-1"><a class="header-anchor" href="#在沙箱失活的时候" aria-hidden="true">#</a> 在沙箱失活的时候：</h4><p>记录window上有哪些状态发生了变化（沙箱自激活开始，到失活的这段时间）； 清除沙箱在激活之后在window上改变的状态，从代码可以看出，就是让window此时的属性状态和刚激活时候的window的属性状态进行对比，不同的属性状态就以快照为准，恢复到未改变之前的状态。</p><h4 id="从上面可以看出-快照沙箱存在两个重要的问题" tabindex="-1"><a class="header-anchor" href="#从上面可以看出-快照沙箱存在两个重要的问题" aria-hidden="true">#</a> 从上面可以看出，快照沙箱存在两个重要的问题：</h4><blockquote><p>会改变全局window的属性，如果同时运行多个微应用，多个应用同时改写window上的属性，势必会出现状态混乱，这也就是为什么快照沙箱无法支持多各微应用同时运行的原因。关于这个问题，下文中支持多应用的代理沙箱可以很好的解决这个问题；</p></blockquote><blockquote><p>会通过for(prop in window){}的方式来遍历window上的所有属性，window属性众多，这其实是一件很耗费性能的事情。关于这个问题支持单应用的代理沙箱和支持多应用的代理沙箱都可以规避。</p></blockquote><p>支持单应用的代理沙箱-极简版</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">LegacySandBox</span><span class="token punctuation">{</span>
    addedPropsMapInSandbox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    modifiedPropsOriginalValueMapInSandbox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    currentUpdatedPropsValueMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    proxyWindow<span class="token punctuation">;</span>
    <span class="token function">setWindowProp</span><span class="token punctuation">(</span><span class="token parameter">prop<span class="token punctuation">,</span> value<span class="token punctuation">,</span> toDelete <span class="token operator">=</span> <span class="token boolean">false</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> toDelete<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">delete</span> window<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            window<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">active</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>currentUpdatedPropsValueMap<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> prop</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setWindowProp</span><span class="token punctuation">(</span>prop<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">inactive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>modifiedPropsOriginalValueMapInSandbox<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> prop</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setWindowProp</span><span class="token punctuation">(</span>prop<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>addedPropsMapInSandbox<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> prop</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setWindowProp</span><span class="token punctuation">(</span>prop<span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> fakeWindow <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>proxyWindow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>fakeWindow<span class="token punctuation">,</span><span class="token punctuation">{</span>
            <span class="token function-variable function">set</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                <span class="token keyword">const</span> originalVal <span class="token operator">=</span> window<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>window<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>prop<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>addedPropsMapInSandbox<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>prop<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>modifiedPropsOriginalValueMapInSandbox<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>prop<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>modifiedPropsOriginalValueMapInSandbox<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>prop<span class="token punctuation">,</span> originalVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>currentUpdatedPropsValueMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>prop<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                window<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function-variable function">get</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> receiver</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span> target<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 验证：</span>
<span class="token keyword">let</span> legacySandBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LegacySandBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
legacySandBox<span class="token punctuation">.</span><span class="token function">active</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
legacySandBox<span class="token punctuation">.</span>proxyWindow<span class="token punctuation">.</span>city <span class="token operator">=</span> <span class="token string">&#39;Beijing&#39;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;window.city-01:&#39;</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>city<span class="token punctuation">)</span><span class="token punctuation">;</span>
legacySandBox<span class="token punctuation">.</span><span class="token function">inactive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;window.city-02:&#39;</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>city<span class="token punctuation">)</span><span class="token punctuation">;</span>
legacySandBox<span class="token punctuation">.</span><span class="token function">active</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;window.city-03:&#39;</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>city<span class="token punctuation">)</span><span class="token punctuation">;</span>
legacySandBox<span class="token punctuation">.</span><span class="token function">inactive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 输出：</span>
<span class="token comment">// window.city-01: Beijing</span>
<span class="token comment">// window.city-02: undefined</span>
<span class="token comment">// window.city-03: Beijing</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>从上面的代码可以看出，其实现的功能和快照沙箱是一模一样的，不同的是，通过三个变量来记住沙箱激活后window发生变化过的所有属性，这样在后续的状态还原时候就不再需要遍历window的所有属性来进行对比，提升了程序运行的性能。但是这仍然改变不了这种机制仍然污染了window的状态的事实，因此也就无法承担起同时支持多个微应用运行的任务。</p><h3 id="支持多应用的代理沙箱-极简版" tabindex="-1"><a class="header-anchor" href="#支持多应用的代理沙箱-极简版" aria-hidden="true">#</a> 支持多应用的代理沙箱-极简版</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">ProxySandBox</span><span class="token punctuation">{</span>
    proxyWindow<span class="token punctuation">;</span>
    isRunning <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token function">active</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>isRunning <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">inactive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>isRunning <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> fakeWindow <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>proxyWindow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>fakeWindow<span class="token punctuation">,</span><span class="token punctuation">{</span>
            <span class="token function-variable function">set</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isRunning<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    target<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function-variable function">get</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> receiver</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span>  prop <span class="token keyword">in</span> target <span class="token operator">?</span> target<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">:</span> window<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>// 验证： let proxySandBox1 = new ProxySandBox(); let proxySandBox2 = new ProxySandBox(); proxySandBox1.active(); proxySandBox2.active(); proxySandBox1.proxyWindow.city = &#39;Beijing&#39;; proxySandBox2.proxyWindow.city = &#39;Shanghai&#39;; console.log(&#39;active:proxySandBox1:window.city:&#39;, proxySandBox1.proxyWindow.city); console.log(&#39;active:proxySandBox2:window.city:&#39;, proxySandBox2.proxyWindow.city); console.log(&#39;window:window.city:&#39;, window.city); proxySandBox1.inactive(); proxySandBox2.inactive(); console.log(&#39;inactive:proxySandBox1:window.city:&#39;, proxySandBox1.proxyWindow.city); console.log(&#39;inactive:proxySandBox2:window.city:&#39;, proxySandBox2.proxyWindow.city); console.log(&#39;window:window.city:&#39;, window.city); // 输出： // active:proxySandBox1:window.city: Beijing // active:proxySandBox2:window.city: Shanghai // window:window.city: undefined // inactive:proxySandBox1:window.city: Beijing // inactive:proxySandBox2:window.city: Shanghai // window:window.city: undefined</p><p>从上面的代码可以发现，ProxySandbox，完全不存在状态恢复的逻辑，同时也不需要记录属性值的变化，因为所有的变化都是沙箱内部的变化，和window没有关系，window上的属性至始至终都没有受到过影响。</p><p>我们可能会问，ProxySandbox已经这么好了，性能优良还支持多个微应用同时运行，那自然也支持单个微应用运行，那LegacySandbox存在还有什么意义呢，这个问题问得很好，其实本身在未来存在的意义也不大了，只不过是因为历史原因还在服役罢了，从Legacy这个单词就已经能推断出LegacySandbox在乾坤中的位置。我们可能还会继续问，那SnapshotSandbox存在还有什么意义呢，这个还真有不小作用，Proxy是新ES6的新事物，低版本浏览器无法兼容所以SnapshotSandbox还会长期存在。虽然这里极简版本逻辑很少，但是由于ProxySandbox要支持多个微应用运行，里面的逻辑会SnapshotsSandbox、LegacySandbox的都要丰富一些。</p><p>其实到了这里，如果读者朋友已经理解了上面的思路，就可以说已经理解了乾坤的Js隔离机制。下面我们来看看乾坤的源码具体是怎么实现的这三个沙箱机制。 乾坤的三个沙箱的源码分析 SnapshotSandbox 源码解析</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> type <span class="token punctuation">{</span> SandBox <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../interfaces&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> SandBoxType <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../interfaces&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">iter</span><span class="token punctuation">(</span>obj<span class="token operator">:</span> <span class="token keyword">typeof</span> window<span class="token punctuation">,</span> <span class="token function-variable function">callbackFn</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">prop</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// eslint-disable-next-line guard-for-in, no-restricted-syntax</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> prop <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// patch for clearInterval for compatible reason, see #1490</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>prop<span class="token punctuation">)</span> <span class="token operator">||</span> prop <span class="token operator">===</span> <span class="token string">&#39;clearInterval&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">callbackFn</span><span class="token punctuation">(</span>prop<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token doc-comment comment">/**
 * 基于 diff 方式实现的沙箱，用于不支持 Proxy 的低版本浏览器
 */</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">SnapshotSandbox</span> <span class="token keyword">implements</span> <span class="token class-name">SandBox</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">proxy</span><span class="token operator">:</span> WindowProxy<span class="token punctuation">;</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> SandBoxType<span class="token punctuation">;</span>
  sandboxRunning <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> windowSnapshot<span class="token operator">!</span><span class="token operator">:</span> Window<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token literal-property property">modifyPropsMap</span><span class="token operator">:</span> Record<span class="token operator">&lt;</span>any<span class="token punctuation">,</span> any<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">name</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>proxy <span class="token operator">=</span> window<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> SandBoxType<span class="token punctuation">.</span>Snapshot<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">active</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 记录当前快照</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>windowSnapshot <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> Window<span class="token punctuation">;</span>
    <span class="token function">iter</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">prop</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>windowSnapshot<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> window<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 恢复之前的变更</span>
    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>modifyPropsMap<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">p</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      window<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>modifyPropsMap<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>sandboxRunning <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">inactive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>modifyPropsMap <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">iter</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">prop</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>windowSnapshot<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 记录变更，恢复环境</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>modifyPropsMap<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> window<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
        window<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>windowSnapshot<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[qiankun:sandbox] </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> origin window restore...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>modifyPropsMap<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>sandboxRunning <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>关于SnapshotSandbox，由于逻辑相对简单，和极简版相比其实差别不大。值得提出来的是里面的iter方法，将遍历window属性的代码抽离出来了，调用这个工具方法后，我们只需要专注于迭代到相应属性时候需要进行的处理。</p><p>LegacySandbox 源码解析</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code> <span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> SandBox <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../../interfaces&#39;</span><span class="token punctuation">;</span>
 <span class="token keyword">import</span> <span class="token punctuation">{</span> SandBoxType <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../../interfaces&#39;</span><span class="token punctuation">;</span>
 <span class="token keyword">import</span> <span class="token punctuation">{</span> getTargetValue <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../common&#39;</span><span class="token punctuation">;</span>
 
 <span class="token keyword">function</span> <span class="token function">isPropConfigurable</span><span class="token punctuation">(</span>target<span class="token operator">:</span> WindowProxy<span class="token punctuation">,</span> prop<span class="token operator">:</span> PropertyKey<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">const</span> descriptor <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> prop<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> descriptor <span class="token operator">?</span> descriptor<span class="token punctuation">.</span>configurable <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 
 <span class="token doc-comment comment">/**
  * 基于 Proxy 实现的沙箱
  * TODO: 为了兼容性 singular 模式下依旧使用该沙箱，等新沙箱稳定之后再切换
  */</span>
 <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">LegacySandbox</span> <span class="token keyword">implements</span> <span class="token class-name">SandBox</span> <span class="token punctuation">{</span>
   <span class="token doc-comment comment">/** 沙箱期间新增的全局变量 */</span>
   <span class="token keyword">private</span> addedPropsMapInSandbox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map<span class="token operator">&lt;</span>PropertyKey<span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
   <span class="token doc-comment comment">/** 沙箱期间更新的全局变量 */</span>
   <span class="token keyword">private</span> modifiedPropsOriginalValueMapInSandbox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map<span class="token operator">&lt;</span>PropertyKey<span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
   <span class="token doc-comment comment">/** 持续记录更新的(新增和修改的)全局变量的 map，用于在任意时刻做 snapshot */</span>
   <span class="token keyword">private</span> currentUpdatedPropsValueMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map<span class="token operator">&lt;</span>PropertyKey<span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
   name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
 
   proxy<span class="token operator">:</span> WindowProxy<span class="token punctuation">;</span>
 
   globalContext<span class="token operator">:</span> <span class="token keyword">typeof</span> window<span class="token punctuation">;</span>
 
   type<span class="token operator">:</span> SandBoxType<span class="token punctuation">;</span>
 
   sandboxRunning <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
 
   latestSetProp<span class="token operator">:</span> PropertyKey <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
 
   <span class="token keyword">private</span> <span class="token function">setWindowProp</span><span class="token punctuation">(</span>prop<span class="token operator">:</span> PropertyKey<span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> toDelete<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> toDelete<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token comment">// eslint-disable-next-line no-param-reassign</span>
       <span class="token keyword">delete</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>globalContext <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isPropConfigurable</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>globalContext<span class="token punctuation">,</span> prop<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> prop <span class="token operator">!==</span> <span class="token string">&#39;symbol&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>globalContext<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> <span class="token punctuation">{</span> writable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> configurable<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token comment">// eslint-disable-next-line no-param-reassign</span>
       <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>globalContext <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
 
   <span class="token function">active</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>sandboxRunning<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span>currentUpdatedPropsValueMap<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> p<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setWindowProp</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
 
     <span class="token keyword">this</span><span class="token punctuation">.</span>sandboxRunning <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
 
   <span class="token function">inactive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[qiankun:sandbox] </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> modified global properties restore...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
         <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>addedPropsMapInSandbox<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
         <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>modifiedPropsOriginalValueMapInSandbox<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
 
     <span class="token comment">// renderSandboxSnapshot = snapshot(currentUpdatedPropsValueMapForSnapshot);</span>
     <span class="token comment">// restore global props to initial snapshot</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span>modifiedPropsOriginalValueMapInSandbox<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> p<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setWindowProp</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span>addedPropsMapInSandbox<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>_<span class="token punctuation">,</span> p<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setWindowProp</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
     <span class="token keyword">this</span><span class="token punctuation">.</span>sandboxRunning <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
 
   <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> globalContext <span class="token operator">=</span> window<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span>globalContext <span class="token operator">=</span> globalContext<span class="token punctuation">;</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> SandBoxType<span class="token punctuation">.</span>LegacyProxy<span class="token punctuation">;</span>
     <span class="token keyword">const</span> <span class="token punctuation">{</span> addedPropsMapInSandbox<span class="token punctuation">,</span> modifiedPropsOriginalValueMapInSandbox<span class="token punctuation">,</span> currentUpdatedPropsValueMap <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
 
     <span class="token keyword">const</span> rawWindow <span class="token operator">=</span> globalContext<span class="token punctuation">;</span>
     <span class="token keyword">const</span> fakeWindow <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">as</span> Window<span class="token punctuation">;</span>
 
     <span class="token keyword">const</span> <span class="token function-variable function">setTrap</span> <span class="token operator">=</span> <span class="token punctuation">(</span>p<span class="token operator">:</span> PropertyKey<span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> originalValue<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> sync2Window <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>sandboxRunning<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>rawWindow<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           addedPropsMapInSandbox<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>modifiedPropsOriginalValueMapInSandbox<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token comment">// 如果当前 window 对象存在该属性，且 record map 中未记录过，则记录该属性初始值</span>
           modifiedPropsOriginalValueMapInSandbox<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> originalValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
 
         currentUpdatedPropsValueMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
         <span class="token keyword">if</span> <span class="token punctuation">(</span>sync2Window<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token comment">// 必须重新设置 window 对象保证下次 get 时能拿到已更新的数据</span>
           <span class="token punctuation">(</span>rawWindow <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
 
         <span class="token keyword">this</span><span class="token punctuation">.</span>latestSetProp <span class="token operator">=</span> p<span class="token punctuation">;</span>
 
         <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
 
       <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[qiankun] Set window.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>p<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> while sandbox destroyed or inactive in </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
 
       <span class="token comment">// 在 strict-mode 下，Proxy 的 handler.set 返回 false 会抛出 TypeError，在沙箱卸载的情况下应该忽略错误</span>
       <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token punctuation">;</span>
 
     <span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>fakeWindow<span class="token punctuation">,</span> <span class="token punctuation">{</span>
       set<span class="token operator">:</span> <span class="token punctuation">(</span>_<span class="token operator">:</span> Window<span class="token punctuation">,</span> p<span class="token operator">:</span> PropertyKey<span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         <span class="token keyword">const</span> originalValue <span class="token operator">=</span> <span class="token punctuation">(</span>rawWindow <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">;</span>
         
         <span class="token keyword">return</span> <span class="token function">setTrap</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> value<span class="token punctuation">,</span> originalValue<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
 
       <span class="token function">get</span><span class="token punctuation">(</span>_<span class="token operator">:</span> Window<span class="token punctuation">,</span> p<span class="token operator">:</span> PropertyKey<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token punctuation">{</span>
         <span class="token comment">// avoid who using window.window or window.self to escape the sandbox environment to touch the really window</span>
         <span class="token comment">// or use window.top to check if an iframe context</span>
         <span class="token comment">// see https://github.com/eligrey/FileSaver.js/blob/master/src/FileSaver.js#L13</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">===</span> <span class="token string">&#39;top&#39;</span> <span class="token operator">||</span> p <span class="token operator">===</span> <span class="token string">&#39;parent&#39;</span> <span class="token operator">||</span> p <span class="token operator">===</span> <span class="token string">&#39;window&#39;</span> <span class="token operator">||</span> p <span class="token operator">===</span> <span class="token string">&#39;self&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> proxy<span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
 
         <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token punctuation">(</span>rawWindow <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">;</span>
         <span class="token keyword">return</span> <span class="token function">getTargetValue</span><span class="token punctuation">(</span>rawWindow<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
 
       <span class="token comment">// trap in operator</span>
       <span class="token comment">// see https://github.com/styled-components/styled-components/blob/master/packages/styled-components/src/constants.js#L12</span>
       <span class="token function">has</span><span class="token punctuation">(</span>_<span class="token operator">:</span> Window<span class="token punctuation">,</span> p<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">symbol</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>
         <span class="token keyword">return</span> p <span class="token keyword">in</span> rawWindow<span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
 
       <span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>_<span class="token operator">:</span> Window<span class="token punctuation">,</span> p<span class="token operator">:</span> PropertyKey<span class="token punctuation">)</span><span class="token operator">:</span> PropertyDescriptor <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token punctuation">{</span>
         <span class="token keyword">const</span> descriptor <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>rawWindow<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token comment">// A property cannot be reported as non-configurable, if it does not exists as an own property of the target object</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>descriptor <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>descriptor<span class="token punctuation">.</span>configurable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           descriptor<span class="token punctuation">.</span>configurable <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
         <span class="token keyword">return</span> descriptor<span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
 
       <span class="token function">defineProperty</span><span class="token punctuation">(</span>_<span class="token operator">:</span> Window<span class="token punctuation">,</span> p<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">symbol</span><span class="token punctuation">,</span> attributes<span class="token operator">:</span> PropertyDescriptor<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>
         <span class="token keyword">const</span> originalValue <span class="token operator">=</span> <span class="token punctuation">(</span>rawWindow <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">;</span>
         <span class="token keyword">const</span> done <span class="token operator">=</span> Reflect<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>rawWindow<span class="token punctuation">,</span> p<span class="token punctuation">,</span> attributes<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token punctuation">(</span>rawWindow <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">;</span>
         <span class="token function">setTrap</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> value<span class="token punctuation">,</span> originalValue<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
         <span class="token keyword">return</span> done<span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
     <span class="token keyword">this</span><span class="token punctuation">.</span>proxy <span class="token operator">=</span> proxy<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>和极简版相比，会发现源码中LegacySandbox的proxy对象除了get、set，还有has、getWownPropertyDescriptor、defineProperty等方法，仔细看会发现，这里面的逻辑，不管是返回值还是设置值，都和get、set一样，都是针对的全局window。看到这里有没有觉得Js基本功很重要，如果对于赋值操作只管set，忽略方法Object.defineProperty也可以改变值，那将这个程序将会漏洞百出。同样如果不关心descriptor的状态，在实际编码过程中，可能就会忽略代码中注释指出的问题 javascript复制代码 // A property cannot be reported as non-configurable, if it does not exists as an own property of the target object</p><p>// 译: 在getOwnPropertyDescriptor方法中，如果返回的descriptor不是target自己的属性的descriptor（所谓自己的属性的descriptor，就是能通过Object.getOwnPropertyDescriptor方法获取的descriptor），那这个descriptor的configurable值就不能是false</p><h2 id="proxysandbox-源码解析" tabindex="-1"><a class="header-anchor" href="#proxysandbox-源码解析" aria-hidden="true">#</a> ProxySandbox 源码解析</h2><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code> <span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> SandBox <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../interfaces&#39;</span><span class="token punctuation">;</span>
 <span class="token keyword">import</span> <span class="token punctuation">{</span> SandBoxType <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../interfaces&#39;</span><span class="token punctuation">;</span>
 <span class="token keyword">import</span> <span class="token punctuation">{</span> nativeGlobal<span class="token punctuation">,</span> nextTask <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../utils&#39;</span><span class="token punctuation">;</span>
 <span class="token keyword">import</span> <span class="token punctuation">{</span> getTargetValue<span class="token punctuation">,</span> setCurrentRunningApp<span class="token punctuation">,</span> getCurrentRunningApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./common&#39;</span><span class="token punctuation">;</span>
 
 <span class="token keyword">type</span> <span class="token class-name">SymbolTarget</span> <span class="token operator">=</span> <span class="token string">&#39;target&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;globalContext&#39;</span><span class="token punctuation">;</span>
 
 <span class="token keyword">type</span> <span class="token class-name">FakeWindow</span> <span class="token operator">=</span> Window <span class="token operator">&amp;</span> Record<span class="token operator">&lt;</span>PropertyKey<span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
 
 <span class="token doc-comment comment">/**
  * fastest(at most time) unique array method
  * <span class="token keyword">@see</span> https://jsperf.com/array-filter-unique/30
  */</span>
 <span class="token keyword">function</span> <span class="token function">uniq</span><span class="token punctuation">(</span>array<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">symbol</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> array<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> PropertyKey<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span> element <span class="token keyword">in</span> <span class="token keyword">this</span> <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">[</span>element<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 
 <span class="token comment">// zone.js will overwrite Object.defineProperty</span>
 <span class="token keyword">const</span> rawObjectDefineProperty <span class="token operator">=</span> Object<span class="token punctuation">.</span>defineProperty<span class="token punctuation">;</span>
 
 <span class="token keyword">const</span> variableWhiteListInDev <span class="token operator">=</span>
   process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;development&#39;</span> <span class="token operator">||</span> window<span class="token punctuation">.</span>__QIANKUN_DEVELOPMENT__
     <span class="token operator">?</span> <span class="token punctuation">[</span>
         <span class="token comment">// for react hot reload</span>
         <span class="token comment">// see https://github.com/facebook/create-react-app/blob/66bf7dfc43350249e2f09d138a20840dae8a0a4a/packages/react-error-overlay/src/index.js#L180</span>
         <span class="token string">&#39;__REACT_ERROR_OVERLAY_GLOBAL_HOOK__&#39;</span><span class="token punctuation">,</span>
       <span class="token punctuation">]</span>
     <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 <span class="token comment">// who could escape the sandbox</span>
 <span class="token keyword">const</span> variableWhiteList<span class="token operator">:</span> PropertyKey<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
   <span class="token comment">// FIXME System.js used a indirect call with eval, which would make it scope escape to global</span>
   <span class="token comment">// To make System.js works well, we write it back to global window temporary</span>
   <span class="token comment">// see https://github.com/systemjs/systemjs/blob/457f5b7e8af6bd120a279540477552a07d5de086/src/evaluate.js#L106</span>
   <span class="token string">&#39;System&#39;</span><span class="token punctuation">,</span>
 
   <span class="token comment">// see https://github.com/systemjs/systemjs/blob/457f5b7e8af6bd120a279540477552a07d5de086/src/instantiate.js#L357</span>
   <span class="token string">&#39;__cjsWrapper&#39;</span><span class="token punctuation">,</span>
   <span class="token operator">...</span>variableWhiteListInDev<span class="token punctuation">,</span>
 <span class="token punctuation">]</span><span class="token punctuation">;</span>
 
 <span class="token comment">/*
  variables who are impossible to be overwrite need to be escaped from proxy sandbox for performance reasons
  */</span>
 <span class="token keyword">const</span> unscopables <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token keyword">undefined</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   <span class="token builtin">Array</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   Object<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   String<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   Boolean<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   Math<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   Number<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   Symbol<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   parseFloat<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   Float32Array<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   isNaN<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   <span class="token number">Infinity</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   Reflect<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   Float64Array<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   <span class="token builtin">Function</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   Map<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   <span class="token number">NaN</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   <span class="token builtin">Promise</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   Proxy<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   Set<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   parseInt<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
   requestAnimationFrame<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
 
 <span class="token keyword">const</span> useNativeWindowForBindingsProps <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map<span class="token operator">&lt;</span>PropertyKey<span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">[</span>
   <span class="token punctuation">[</span><span class="token string">&#39;fetch&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
   <span class="token punctuation">[</span><span class="token string">&#39;mockDomAPIInBlackList&#39;</span><span class="token punctuation">,</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;test&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
 <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
 <span class="token keyword">function</span> <span class="token function">createFakeWindow</span><span class="token punctuation">(</span>globalContext<span class="token operator">:</span> Window<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// map always has the fastest performance in has check scenario</span>
   <span class="token comment">// see https://jsperf.com/array-indexof-vs-set-has/23</span>
   <span class="token keyword">const</span> propertiesWithGetter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map<span class="token operator">&lt;</span>PropertyKey<span class="token punctuation">,</span> <span class="token builtin">boolean</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">const</span> fakeWindow <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">as</span> FakeWindow<span class="token punctuation">;</span>
 
   <span class="token comment">/*
    copy the non-configurable property of global to fakeWindow
    see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/getOwnPropertyDescriptor
    &gt; A property cannot be reported as non-configurable, if it does not exists as an own property of the target object or if it exists as a configurable own property of the target object.
    */</span>
   Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyNames</span><span class="token punctuation">(</span>globalContext<span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
       <span class="token keyword">const</span> descriptor <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>globalContext<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">return</span> <span class="token operator">!</span>descriptor<span class="token operator">?.</span>configurable<span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span>
     <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
       <span class="token keyword">const</span> descriptor <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>globalContext<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span>descriptor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">const</span> hasGetter <span class="token operator">=</span> Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>descriptor<span class="token punctuation">,</span> <span class="token string">&#39;get&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
         <span class="token comment">/*
          make top/self/window property configurable and writable, otherwise it will cause TypeError while get trap return.
          see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/get
          &gt; The value reported for a property must be the same as the value of the corresponding target object property if the target object property is a non-writable, non-configurable data property.
          */</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>
           p <span class="token operator">===</span> <span class="token string">&#39;top&#39;</span> <span class="token operator">||</span>
           p <span class="token operator">===</span> <span class="token string">&#39;parent&#39;</span> <span class="token operator">||</span>
           p <span class="token operator">===</span> <span class="token string">&#39;self&#39;</span> <span class="token operator">||</span>
           p <span class="token operator">===</span> <span class="token string">&#39;window&#39;</span> <span class="token operator">||</span>
           <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;test&#39;</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>p <span class="token operator">===</span> <span class="token string">&#39;mockTop&#39;</span> <span class="token operator">||</span> p <span class="token operator">===</span> <span class="token string">&#39;mockSafariTop&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
         <span class="token punctuation">)</span> <span class="token punctuation">{</span>
           descriptor<span class="token punctuation">.</span>configurable <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
           <span class="token comment">/*
            The descriptor of window.window/window.top/window.self in Safari/FF are accessor descriptors, we need to avoid adding a data descriptor while it was
            Example:
             Safari/FF: Object.getOwnPropertyDescriptor(window, &#39;top&#39;) -&gt; {get: function, set: undefined, enumerable: true, configurable: false}
             Chrome: Object.getOwnPropertyDescriptor(window, &#39;top&#39;) -&gt; {value: Window, writable: false, enumerable: true, configurable: false}
            */</span>
           <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>hasGetter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
             descriptor<span class="token punctuation">.</span>writable <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
         <span class="token punctuation">}</span>
 
         <span class="token keyword">if</span> <span class="token punctuation">(</span>hasGetter<span class="token punctuation">)</span> propertiesWithGetter<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
         <span class="token comment">// freeze the descriptor to avoid being modified by zone.js</span>
         <span class="token comment">// see https://github.com/angular/zone.js/blob/a5fe09b0fac27ac5df1fa746042f96f05ccb6a00/lib/browser/define-property.ts#L71</span>
         <span class="token function">rawObjectDefineProperty</span><span class="token punctuation">(</span>fakeWindow<span class="token punctuation">,</span> p<span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span>descriptor<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
   <span class="token keyword">return</span> <span class="token punctuation">{</span>
     fakeWindow<span class="token punctuation">,</span>
     propertiesWithGetter<span class="token punctuation">,</span>
   <span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 
 <span class="token keyword">let</span> activeSandboxCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
 
 <span class="token doc-comment comment">/**
  * 基于 Proxy 实现的沙箱
  */</span>
 <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">ProxySandbox</span> <span class="token keyword">implements</span> <span class="token class-name">SandBox</span> <span class="token punctuation">{</span>
   <span class="token doc-comment comment">/** window 值变更记录 */</span>
   <span class="token keyword">private</span> updatedValueSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set<span class="token operator">&lt;</span>PropertyKey<span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
   name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
 
   type<span class="token operator">:</span> SandBoxType<span class="token punctuation">;</span>
 
   proxy<span class="token operator">:</span> WindowProxy<span class="token punctuation">;</span>
 
   globalContext<span class="token operator">:</span> <span class="token keyword">typeof</span> window<span class="token punctuation">;</span>
 
   sandboxRunning <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
 
   latestSetProp<span class="token operator">:</span> PropertyKey <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
 
   <span class="token keyword">private</span> <span class="token function">registerRunningApp</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> proxy<span class="token operator">:</span> Window<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>sandboxRunning<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">const</span> currentRunningApp <span class="token operator">=</span> <span class="token function">getCurrentRunningApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>currentRunningApp <span class="token operator">||</span> currentRunningApp<span class="token punctuation">.</span>name <span class="token operator">!==</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token function">setCurrentRunningApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">,</span> window<span class="token operator">:</span> proxy <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
       <span class="token comment">// FIXME if you have any other good ideas</span>
       <span class="token comment">// remove the mark in next tick, thus we can identify whether it in micro app or not</span>
       <span class="token comment">// this approach is just a workaround, it could not cover all complex cases, such as the micro app runs in the same task context with master in some case</span>
       <span class="token function">nextTask</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         <span class="token function">setCurrentRunningApp</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
 
   <span class="token function">active</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>sandboxRunning<span class="token punctuation">)</span> activeSandboxCount<span class="token operator">++</span><span class="token punctuation">;</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span>sandboxRunning <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
 
   <span class="token function">inactive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[qiankun:sandbox] </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> modified global properties restore...</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
         <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>updatedValueSet<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
 
     <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">--</span>activeSandboxCount <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       variableWhiteList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>proxy<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token comment">// @ts-ignore</span>
           <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span>globalContext<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
       <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
 
     <span class="token keyword">this</span><span class="token punctuation">.</span>sandboxRunning <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
 
   <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> globalContext <span class="token operator">=</span> window<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span>globalContext <span class="token operator">=</span> globalContext<span class="token punctuation">;</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> SandBoxType<span class="token punctuation">.</span>Proxy<span class="token punctuation">;</span>
     <span class="token keyword">const</span> <span class="token punctuation">{</span> updatedValueSet <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
 
     <span class="token keyword">const</span> <span class="token punctuation">{</span> fakeWindow<span class="token punctuation">,</span> propertiesWithGetter <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">createFakeWindow</span><span class="token punctuation">(</span>globalContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
     <span class="token keyword">const</span> descriptorTargetMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map<span class="token operator">&lt;</span>PropertyKey<span class="token punctuation">,</span> SymbolTarget<span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">const</span> <span class="token function-variable function">hasOwnProperty</span> <span class="token operator">=</span> <span class="token punctuation">(</span>key<span class="token operator">:</span> PropertyKey<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> fakeWindow<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">||</span> globalContext<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
     <span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>fakeWindow<span class="token punctuation">,</span> <span class="token punctuation">{</span>
       set<span class="token operator">:</span> <span class="token punctuation">(</span>target<span class="token operator">:</span> FakeWindow<span class="token punctuation">,</span> p<span class="token operator">:</span> PropertyKey<span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>sandboxRunning<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">registerRunningApp</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> proxy<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token comment">// We must kept its description while the property existed in globalContext before</span>
           <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>target<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> globalContext<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token keyword">const</span> descriptor <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>globalContext<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token keyword">const</span> <span class="token punctuation">{</span> writable<span class="token punctuation">,</span> configurable<span class="token punctuation">,</span> enumerable <span class="token punctuation">}</span> <span class="token operator">=</span> descriptor<span class="token operator">!</span><span class="token punctuation">;</span>
             <span class="token keyword">if</span> <span class="token punctuation">(</span>writable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
               Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> p<span class="token punctuation">,</span> <span class="token punctuation">{</span>
                 configurable<span class="token punctuation">,</span>
                 enumerable<span class="token punctuation">,</span>
                 writable<span class="token punctuation">,</span>
                 value<span class="token punctuation">,</span>
               <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token punctuation">}</span>
           <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
             <span class="token comment">// @ts-ignore</span>
             target<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
 
           <span class="token keyword">if</span> <span class="token punctuation">(</span>variableWhiteList<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token comment">// @ts-ignore</span>
             globalContext<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
 
           updatedValueSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
           <span class="token keyword">this</span><span class="token punctuation">.</span>latestSetProp <span class="token operator">=</span> p<span class="token punctuation">;</span>
 
           <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
 
         <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[qiankun] Set window.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>p<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> while sandbox destroyed or inactive in </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
 
         <span class="token comment">// 在 strict-mode 下，Proxy 的 handler.set 返回 false 会抛出 TypeError，在沙箱卸载的情况下应该忽略错误</span>
         <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
 
       get<span class="token operator">:</span> <span class="token punctuation">(</span>target<span class="token operator">:</span> FakeWindow<span class="token punctuation">,</span> p<span class="token operator">:</span> PropertyKey<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">registerRunningApp</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> proxy<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
         <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">===</span> Symbol<span class="token punctuation">.</span>unscopables<span class="token punctuation">)</span> <span class="token keyword">return</span> unscopables<span class="token punctuation">;</span>
         <span class="token comment">// avoid who using window.window or window.self to escape the sandbox environment to touch the really window</span>
         <span class="token comment">// see https://github.com/eligrey/FileSaver.js/blob/master/src/FileSaver.js#L13</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">===</span> <span class="token string">&#39;window&#39;</span> <span class="token operator">||</span> p <span class="token operator">===</span> <span class="token string">&#39;self&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> proxy<span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
 
         <span class="token comment">// hijack globalWindow accessing with globalThis keyword</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">===</span> <span class="token string">&#39;globalThis&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> proxy<span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
 
         <span class="token keyword">if</span> <span class="token punctuation">(</span>
           p <span class="token operator">===</span> <span class="token string">&#39;top&#39;</span> <span class="token operator">||</span>
           p <span class="token operator">===</span> <span class="token string">&#39;parent&#39;</span> <span class="token operator">||</span>
           <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&#39;test&#39;</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>p <span class="token operator">===</span> <span class="token string">&#39;mockTop&#39;</span> <span class="token operator">||</span> p <span class="token operator">===</span> <span class="token string">&#39;mockSafariTop&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
         <span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token comment">// if your master app in an iframe context, allow these props escape the sandbox</span>
           <span class="token keyword">if</span> <span class="token punctuation">(</span>globalContext <span class="token operator">===</span> globalContext<span class="token punctuation">.</span>parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token keyword">return</span> proxy<span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
           <span class="token keyword">return</span> <span class="token punctuation">(</span>globalContext <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
 
         <span class="token comment">// proxy.hasOwnProperty would invoke getter firstly, then its value represented as globalContext.hasOwnProperty</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">===</span> <span class="token string">&#39;hasOwnProperty&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> hasOwnProperty<span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
 
         <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">===</span> <span class="token string">&#39;document&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> document<span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
 
         <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">===</span> <span class="token string">&#39;eval&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">return</span> eval<span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
 
         <span class="token keyword">const</span> value <span class="token operator">=</span> propertiesWithGetter<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>
           <span class="token operator">?</span> <span class="token punctuation">(</span>globalContext <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">[</span>p<span class="token punctuation">]</span>
           <span class="token operator">:</span> p <span class="token keyword">in</span> target
           <span class="token operator">?</span> <span class="token punctuation">(</span>target <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">[</span>p<span class="token punctuation">]</span>
           <span class="token operator">:</span> <span class="token punctuation">(</span>globalContext <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">;</span>
         <span class="token comment">/* Some dom api must be bound to native window, otherwise it would cause exception like &#39;TypeError: Failed to execute &#39;fetch&#39; on &#39;Window&#39;: Illegal invocation&#39;
            See this code:
              const proxy = new Proxy(window, {});
              const proxyFetch = fetch.bind(proxy);
              proxyFetch(&#39;https://qiankun.com&#39;);
         */</span>
         <span class="token keyword">const</span> boundTarget <span class="token operator">=</span> useNativeWindowForBindingsProps<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token operator">?</span> nativeGlobal <span class="token operator">:</span> globalContext<span class="token punctuation">;</span>
         <span class="token keyword">return</span> <span class="token function">getTargetValue</span><span class="token punctuation">(</span>boundTarget<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
 
       <span class="token comment">// trap in operator</span>
       <span class="token comment">// see https://github.com/styled-components/styled-components/blob/master/packages/styled-components/src/constants.js#L12</span>
       <span class="token function">has</span><span class="token punctuation">(</span>target<span class="token operator">:</span> FakeWindow<span class="token punctuation">,</span> p<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">symbol</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>
         <span class="token keyword">return</span> p <span class="token keyword">in</span> unscopables <span class="token operator">||</span> p <span class="token keyword">in</span> target <span class="token operator">||</span> p <span class="token keyword">in</span> globalContext<span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
 
       <span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>target<span class="token operator">:</span> FakeWindow<span class="token punctuation">,</span> p<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">symbol</span><span class="token punctuation">)</span><span class="token operator">:</span> PropertyDescriptor <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token punctuation">{</span>
         <span class="token comment">/*
          as the descriptor of top/self/window/mockTop in raw window are configurable but not in proxy target, we need to get it from target to avoid TypeError
          see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/getOwnPropertyDescriptor
          &gt; A property cannot be reported as non-configurable, if it does not exists as an own property of the target object or if it exists as a configurable own property of the target object.
          */</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">const</span> descriptor <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>
           descriptorTargetMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> <span class="token string">&#39;target&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword">return</span> descriptor<span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
 
         <span class="token keyword">if</span> <span class="token punctuation">(</span>globalContext<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">const</span> descriptor <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>globalContext<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>
           descriptorTargetMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> <span class="token string">&#39;globalContext&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token comment">// A property cannot be reported as non-configurable, if it does not exists as an own property of the target object</span>
           <span class="token keyword">if</span> <span class="token punctuation">(</span>descriptor <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>descriptor<span class="token punctuation">.</span>configurable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
             descriptor<span class="token punctuation">.</span>configurable <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
           <span class="token keyword">return</span> descriptor<span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
 
         <span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
 
       <span class="token comment">// trap to support iterator with sandbox</span>
       <span class="token function">ownKeys</span><span class="token punctuation">(</span>target<span class="token operator">:</span> FakeWindow<span class="token punctuation">)</span><span class="token operator">:</span> ArrayLike<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">symbol</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
         <span class="token keyword">return</span> <span class="token function">uniq</span><span class="token punctuation">(</span>Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>globalContext<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
 
       <span class="token function">defineProperty</span><span class="token punctuation">(</span>target<span class="token operator">:</span> Window<span class="token punctuation">,</span> p<span class="token operator">:</span> PropertyKey<span class="token punctuation">,</span> attributes<span class="token operator">:</span> PropertyDescriptor<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>
         <span class="token keyword">const</span> from <span class="token operator">=</span> descriptorTargetMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token comment">/*
          Descriptor must be defined to native window while it comes from native window via Object.getOwnPropertyDescriptor(window, p),
          otherwise it would cause a TypeError with illegal invocation.
          */</span>
         <span class="token keyword">switch</span> <span class="token punctuation">(</span>from<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">case</span> <span class="token string">&#39;globalContext&#39;</span><span class="token operator">:</span>
             <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>globalContext<span class="token punctuation">,</span> p<span class="token punctuation">,</span> attributes<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword">default</span><span class="token operator">:</span>
             <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> p<span class="token punctuation">,</span> attributes<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
 
       deleteProperty<span class="token operator">:</span> <span class="token punctuation">(</span>target<span class="token operator">:</span> FakeWindow<span class="token punctuation">,</span> p<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">symbol</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">registerRunningApp</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> proxy<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token comment">// @ts-ignore</span>
           <span class="token keyword">delete</span> target<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">;</span>
           updatedValueSet<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
           <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
 
         <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
 
       <span class="token comment">// makes sure `window instanceof Window` returns truthy in micro app</span>
       <span class="token function">getPrototypeOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">return</span> Reflect<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>globalContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
     <span class="token keyword">this</span><span class="token punctuation">.</span>proxy <span class="token operator">=</span> proxy<span class="token punctuation">;</span>
 
     activeSandboxCount<span class="token operator">++</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面是ProxySandbox的全部源码，我拿其中一个细节聊一聊吧。里面有一个uniq方法，我单独放在下面。filter的第1个参数是一个函数，第二个参数是一个对象。具体参数的含义可以查阅相关文档。这里之所以提出来，就是里面巧妙的运用了这个this。通过在this上设置属性，并以之为条件来实现去重功能。另外关于这个this，会发现function filter(this: PropertyKey[], element) 第一个参数是this，正常在javascript这是会运行出错的，其实出现在这里仅仅是typescript用作类型推断，编译后应该是没有这个参数的，所以我们可以认为这里的第一个参数就是element，我在第一次阅读到这里的时候因为对这个typescript的小语法点不清楚，疑惑了好一会查文档才搞清楚。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token doc-comment comment">/**
 * fastest(at most time) unique array method
 * <span class="token keyword">@see</span> https://jsperf.com/array-filter-unique/30
 */</span>
 <span class="token keyword">function</span> <span class="token function">uniq</span><span class="token punctuation">(</span>array<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">symbol</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> array<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> PropertyKey<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> element <span class="token keyword">in</span> <span class="token keyword">this</span> <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">[</span>element<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--[--><div><!-- <div class="money">打赏</div> --><!-- <div>评论</div> --></div><!--]--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/qdleader/qdleader/edit/master/微前端/qiankun/原理探究/1.乾坤的沙箱隔离机制.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!----><!----></footer><!----><!--[--><!--[--><div class="footer"><a href="https://github.com/qdleader/qdleader">qdleader</a><div class="busuanzi"><span id="busuanzi_container_site_pv"> 本站总访问量 <span id="busuanzi_value_site_pv">129823</span>次 <span class="post-meta-divider">|</span></span><span id="busuanzi_container_site_uv"> 本站访客数 <span id="busuanzi_value_site_uv">12</span>人 </span></div></div><!--]--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/docs/assets/app-otDwoQZb.js" defer></script>
  </body>
</html>
